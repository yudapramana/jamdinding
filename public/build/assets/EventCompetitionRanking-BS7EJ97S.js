import{z as _e,y as S,A as M,M as fe,V as pe,O as Y,B as l,C as a,D as e,I as K,K as m,J as r,H as j,ax as be,S as he,aB as ke,U as f,ay as k,a as D,L as ye,F as xe}from"./AuthUserStore-D7C5-kPo.js";import{S as R}from"./sweetalert2.esm.all-9Qm2jZ7z.js";import{_ as we}from"./app-BBalU50U.js";const Se={class:"content-header"},Ke={class:"container-fluid"},Re={class:"d-flex justify-content-between align-items-center"},Ce={class:"mb-0 text-muted text-sm"},Ne={key:0,class:"ml-2"},Me={class:"btn-group"},je=["disabled"],$e=["disabled"],Pe=["disabled"],Te=["disabled"],Fe={key:0,class:"text-muted d-block mt-1"},De={key:1,class:"card mt-3"},He={class:"card-body py-2"},Be={class:"d-flex justify-content-between align-items-start"},Ge={key:0,class:"text-muted text-xs mt-2"},Ae={class:"text-right ml-3",style:{"min-width":"220px"}},Ie={class:"font-weight-bold",style:{"font-size":"1.1rem"}},Ee={key:0},Le={key:1,class:"text-muted"},Ue={key:2,class:"card mt-3"},Ve={class:"card-body py-2"},Oe={class:"form-row align-items-end"},ze={class:"form-group col-md-8 mb-0"},We=["disabled"],qe=["label"],Qe=["value"],Xe={key:0,class:"text-muted"},Ye={class:"form-group col-md-4 mb-0"},Ze=["disabled"],Je={key:3,class:"alert alert-warning py-2 mb-3",style:{"border-radius":"8px"}},et={class:"font-weight-bold mb-1"},tt={class:"mb-0 pl-3 text-sm"},st={class:"content"},nt={class:"container-fluid"},lt={class:"card"},at={class:"card-body table-responsive p-0"},it={key:0,class:"mb-2"},ot={class:"nav nav-pills"},rt=["onClick"],ut={class:"badge badge-light border ml-2"},dt={class:"table table-bordered table-hover text-sm mb-0"},ct={class:"thead-light"},mt={key:0},vt={key:1},gt={key:0},_t=["colspan"],ft={key:1},pt=["colspan"],bt={key:2},ht=["colspan"],kt={class:"text-center font-weight-bold"},yt={class:"font-weight-bold"},xt={class:"text-muted text-xs"},wt={class:"text-muted text-xs"},St={class:"text-center"},Kt={class:"text-center font-weight-bold"},Rt={class:"text-center font-weight-bold"},Ct={class:"font-weight-bold"},Nt={class:"text-muted text-xs"},Mt={class:"text-center"},jt={class:"text-center font-weight-bold"},$t={key:1,class:"p-2 border-top"},Pt={class:"d-flex justify-content-between align-items-center mb-2"},Tt={class:"font-weight-bold"},Ft={key:0,class:"text-muted ml-2"},Dt={class:"text-muted"},Ht={key:0,class:"text-center text-muted py-3"},Bt={key:1,class:"text-center text-muted py-3"},Gt={key:2,class:"table-responsive"},At={class:"table table-bordered table-sm text-sm mb-0"},It={class:"thead-light"},Et=["colspan"],Lt=["title"],Ut={class:"text-center font-weight-bold"},Vt={class:"font-weight-bold"},Ot={class:"text-muted text-xs"},zt=["title"],Wt={key:0},qt={key:1,class:"text-muted"},Qt=["title"],Xt={key:0},Yt={key:1,class:"text-muted"},Zt={class:"text-center font-weight-bold"},Jt={key:3,class:"text-center text-muted py-3"},es={key:4,class:"table-responsive"},ts={class:"table table-bordered table-sm text-sm mb-0"},ss={class:"thead-light"},ns=["colspan"],ls=["title"],as={key:0},is=["colspan"],os={class:"text-center font-weight-bold"},rs={class:"font-weight-bold"},us={key:0},ds={key:1,class:"text-muted"},cs=["title"],ms={key:0},vs={key:1,class:"text-muted"},gs={class:"text-center font-weight-bold"},_s={key:0},fs={key:1,class:"text-muted"},ps={class:"card-footer text-muted text-sm"},bs={__name:"EventCompetitionRanking",setup(hs){const Z=fe(),ne=ye(),V=_e(),le=S(()=>V.eventData||null),H=S(()=>{var n;return((n=le.value)==null?void 0:n.id)||null}),b=M("all"),$=M(String(Z.params.id||"")),J=M([]),B=M(!1),C=M(!1),T=M(null),P=M([]),O=M(!1),v=M({judges:[],fields:[],rows:[]}),N=M(null),p=S(()=>$.value||null),y=S(()=>{var n;return!!((n=T.value)!=null&&n.is_team)}),x=n=>{const t=Number(n);return Number.isFinite(t)?t.toFixed(2):"-"},ee=n=>`H${n+1}`,F=n=>{if(!n)return!1;if(N.value!=null)return String(n)===String(N.value);const t=(v.value.judges||[]).find(o=>String(o.id)===String(n));return!!(t!=null&&t.is_chief)},z=async()=>{if(H.value){B.value=!0;try{const{data:n}=await D.get(`/api/v1/events/${H.value}/competitions/tree`,{params:{search:""}});J.value=n.rounds||[]}catch(n){console.error(n),R.fire("Gagal","Gagal memuat daftar kompetisi.","error")}finally{B.value=!1}}},I=async()=>{if(!p.value){T.value=null,P.value=[],v.value={judges:[],fields:[],rows:[]},N.value=null;return}C.value=!0;try{const{data:n}=await D.get(`/api/v1/event-competitions/${p.value}/ranking`);T.value=n.competition,P.value=n.ranking||[]}catch(n){console.error(n),R.fire("Gagal","Gagal memuat ranking.","error")}finally{C.value=!1}},ae=async()=>{if(p.value){C.value=!0;try{const{data:n}=await D.post(`/api/v1/event-competitions/${p.value}/ranking/recalculate`);P.value=n.ranking||[],R.fire("OK","Ranking dihitung ulang.","success")}catch(n){console.error(n),R.fire("Gagal","Gagal hitung ulang ranking.","error")}finally{C.value=!1}}},ie=async()=>{if(!(!p.value||!(await R.fire({title:"Publish Ranking?",text:"Akan membuat Medal Standings & update Contingent.",icon:"warning",showCancelButton:!0,confirmButtonText:"Publish"})).isConfirmed)){C.value=!0;try{await D.post(`/api/v1/event-competitions/${p.value}/ranking/publish`,{top_n:6}),R.fire("Published","Top 6 berhasil dipublish.","success")}catch(t){console.error(t),R.fire("Gagal","Gagal publish ranking.","error")}finally{C.value=!1}}},oe=async()=>{$.value&&(localStorage.setItem("last_scoring_competition_id",String($.value)),ne.replace({name:"admin.event.ranking.index",params:{id:$.value}}))},W=S(()=>{var t,o;return(((o=(t=T.value)==null?void 0:t.round)==null?void 0:o.name)||"").toString().trim().toLowerCase().includes("final")}),re=S(()=>{var o,u,c,s;const n=(((u=(o=V.user)==null?void 0:o.role)==null?void 0:u.slug)||"").toString().trim().toLowerCase(),t=(((s=(c=V.user)==null?void 0:c.role)==null?void 0:s.name)||"").toString().trim().toLowerCase();return n==="superadmin"||n==="super_admin"||t==="superadmin"}),E=S(()=>{const n=new Map,t=P.value||[];for(const o of t){const u=String((o==null?void 0:o.event_category_id)??"");if(!u)continue;const c=(o==null?void 0:o.category_name)||(o==null?void 0:o.category)||"-";n.has(u)||n.set(u,{id:u,name:c,count:0}),n.get(u).count++}return[{id:"all",name:"Semua Kontingen",count:t.length},...Array.from(n.values())]}),G=S(()=>b.value==="all"?P.value||[]:(P.value||[]).filter(n=>String(n.event_category_id)===String(b.value))),q=S(()=>{const n=G.value||[],t=["ðŸ¥‡ Emas","ðŸ¥ˆ Perak","ðŸ¥‰ Perunggu","ðŸ… Harapan I","ðŸ… Harapan II","ðŸ… Harapan III"];return n.slice(0,6).map((o,u)=>({...o,medal:t[u]??null}))}),ue=async()=>{if(!(!p.value||b.value==="all"))try{await D.get(`/api/v1/event-competitions/${p.value}/ranking/export`,{params:{event_category_id:b.value}}),R.fire("OK","Data siap diexport (lihat console / lanjutkan Excel).","success")}catch(n){console.error(n),R.fire("Gagal","Gagal export data.","error")}},de=n=>{const t=(n==null?void 0:n.judges)||[],o=(n==null?void 0:n.fields)||[],u=(n==null?void 0:n.participants)||(n==null?void 0:n.rows)||[],c=(o||[]).map(i=>({...i,id:i.id??i.event_field_component_id??null,name:i.name??i.field_name??"-",order_number:i.order_number??999999})).filter(i=>i.id!=null).sort((i,d)=>(i.order_number??999999)-(d.order_number??999999)),s=(u||[]).map(i=>({...i,scores:i.scores||{},field_scores:i.field_scores||{},final_score:i.final_score??i.avg_score??0}));return{judges:t,fields:c,rows:s}},L=async()=>{var n;if(!p.value||b.value==="all"){v.value={judges:[],fields:[],rows:[]},N.value=null;return}O.value=!0;try{const{data:t}=await D.get(`/api/v1/event-competitions/${p.value}/ranking/details`,{params:{event_category_id:b.value,debug:1}});v.value=de(t),N.value=((n=t==null?void 0:t.debug)==null?void 0:n.chief_judge_id)??null}catch(t){console.error(t),v.value={judges:[],fields:[],rows:[]},N.value=null,R.fire("Gagal","Gagal memuat detail nilai.","error")}finally{O.value=!1}},te=(n,t,o)=>{var d,h,g,w;const u=String(t),c=String(o),s=((d=n==null?void 0:n.scores_by_field)==null?void 0:d[u])??((h=n==null?void 0:n.scores_by_field)==null?void 0:h[t]);if(s){const _=(s==null?void 0:s[c])??(s==null?void 0:s[o]);if(_!=null&&_!==""){const A=Number(typeof _=="object"?_.weighted_score??_.score:_);return Number.isFinite(A)?A:null}}const i=((g=n==null?void 0:n.field_scores)==null?void 0:g[u])??((w=n==null?void 0:n.field_scores)==null?void 0:w[t]);if(i){const _=(i==null?void 0:i[c])??(i==null?void 0:i[o]);if(_!=null&&_!==""){const A=Number(typeof _=="object"?_.weighted_score??_.score:_);return Number.isFinite(A)?A:null}}return null},ce=n=>{const t=(n==null?void 0:n.member_count)??null,o=Array.isArray(n==null?void 0:n.member_names)?n.member_names:[];if(!t&&!o.length)return"-";const u=t!=null?`${t} anggota`:`${o.length} anggota`;return o.length?`${u} â€” ${o.join(", ")}`:u},me=n=>Object.keys((n==null?void 0:n.scores)||{}).length,Q=(n,t,o)=>{var h,g;const u=String(t),c=String(o),s=((h=n==null?void 0:n.field_scores)==null?void 0:h[u])??((g=n==null?void 0:n.field_scores)==null?void 0:g[t]);if(!s)return null;const i=(s==null?void 0:s[c])??(s==null?void 0:s[o]);if(i==null)return null;if(typeof i=="object"){const w=i.weighted_score??i.score;if(w==null)return null;const _=Number(w);return Number.isFinite(_)?_:null}const d=Number(i);return Number.isFinite(d)?d:null},U=(n,t)=>{const o=(v.value.judges||[]).map(c=>Q(n,c.id,t)).filter(c=>Number.isFinite(Number(c)));return o.length?o.reduce((c,s)=>c+Number(s),0)/o.length:null},ve=S(()=>{if(y.value)return new Map;const n=v.value.rows||[],t=v.value.fields||[],o=new Map;for(const c of n){const s=String(Number(c.final_score??0).toFixed(2));o.has(s)||o.set(s,[]),o.get(s).push(c)}const u=new Map;for(const[,c]of o.entries()){if(!c||c.length<=1)continue;let s=null,i=null;for(const d of t){const h=c.map(_=>U(_,d.id)).filter(_=>_!=null);if(!h.length)continue;const g=Math.max(...h),w=Math.min(...h);if(Number(g.toFixed(4))!==Number(w.toFixed(4))){s=d.id,i=g;break}}if(s!=null&&i!=null)for(const h of c){const g=U(h,s);g!=null&&Math.abs(g-i)<=1e-6&&u.set(`${h.event_participant_id}|${s}`,"win")}}return u}),se=(n,t)=>ve.value.get(`${n.event_participant_id}|${t}`)==="win",ge=S(()=>{var o,u,c,s,i,d,h;const n=new Map,t=((o=v.value)==null?void 0:o.debug)||null;if(!(t!=null&&t.pairs))return n;for(const g of t.pairs){const w=(u=g.decided_by)==null?void 0:u.rule,_=(c=g.decided_by)==null?void 0:c.field_component_id;!w||!_||(((s=g.decided_by)==null?void 0:s.a)>((i=g.decided_by)==null?void 0:i.b)&&n.set(`${g.a.id}|${_}`,{rule:w,field_id:_,value:g.decided_by.a}),((d=g.decided_by)==null?void 0:d.b)>((h=g.decided_by)==null?void 0:h.a)&&n.set(`${g.b.id}|${_}`,{rule:w,field_id:_,value:g.decided_by.b}))}return n}),X=(n,t)=>{const o=`${n.group_key||n.event_participant_id}|${t}`,u=ge.value.get(o);return u?u.rule===2?`Tie-break Rule #2
Rerata Bidang
Nilai: ${x(u.value)}`:u.rule===3?`Tie-break Rule #3
Hakim Ketua
Nilai: ${x(u.value)}`:null:null};return pe(async()=>{if(!H.value){R.fire("Event belum dipilih","Silakan pilih event melalui Portal Event terlebih dahulu.","info");return}await z(),await I(),await L()}),Y(()=>Z.params.id,async n=>{$.value=String(n||""),b.value="all",await I(),await L()}),Y(()=>H.value,async n=>{n&&(b.value="all",await z(),await I(),await L())}),Y(()=>b.value,async()=>{await L()}),(n,t)=>{var o,u,c;return a(),l(f,null,[e("section",Se,[e("div",Ke,[e("div",Re,[e("div",null,[t[1]||(t[1]=e("h1",{class:"mb-1"},"Ranking Kompetisi",-1)),e("p",Ce,[m(r(((o=T.value)==null?void 0:o.full_name)||"Pilih kompetisi untuk melihat ranking.")+" ",1),p.value&&T.value?(a(),l("span",Ne,[e("span",{class:j(["badge",y.value?"badge-dark":"badge-secondary"])},r(y.value?"TEAM":"INDIVIDU"),3)])):K("",!0)])]),e("div",Me,[e("button",{class:"btn btn-sm btn-outline-secondary",onClick:I,disabled:C.value||!p.value},t[2]||(t[2]=[e("i",{class:"fas fa-sync"},null,-1),m(" Refresh ")]),8,je),e("button",{class:"btn btn-sm btn-primary",onClick:ae,disabled:C.value||!p.value},t[3]||(t[3]=[e("i",{class:"fas fa-calculator"},null,-1),m(" Hitung Ulang ")]),8,$e),e("button",{class:"btn btn-sm btn-success",onClick:ie,disabled:C.value||!p.value||b.value==="all"||G.value.length===0||!W.value||!re.value},t[4]||(t[4]=[e("i",{class:"fas fa-award"},null,-1),m(" Publish Top 6 ")]),8,Pe),e("button",{class:"btn btn-sm btn-outline-success",disabled:!p.value||b.value==="all",onClick:ue},t[5]||(t[5]=[e("i",{class:"fas fa-file-excel"},null,-1),m(" Export ")]),8,Te)])]),p.value&&b.value==="all"?(a(),l("small",Fe,t[6]||(t[6]=[e("i",{class:"fas fa-info-circle mr-1"},null,-1),m(" Pilih tab kategori (Putra/Putri) untuk publish & melihat detail nilai. ")]))):K("",!0),p.value&&W.value&&b.value!=="all"&&q.value.length?(a(),l("div",De,[e("div",He,[e("div",Be,[e("div",null,[t[8]||(t[8]=be('<div class="font-weight-bold mb-1" data-v-0639acbf><i class="fas fa-info-circle mr-1" data-v-0639acbf></i> Mekanisme Penilaian &amp; Tie-break </div><div class="text-muted text-sm" data-v-0639acbf> Ranking ditentukan berdasarkan <strong data-v-0639acbf>Final Score</strong>. Jika terjadi nilai sama, sistem memakai urutan bidang dari <strong data-v-0639acbf>Komponen Nilai Bidang</strong> (diurutkan berdasarkan urutan prioritas naik; null dianggap paling akhir) sebagai prioritas tie-break. </div><ul class="text-sm mb-0 mt-2 pl-3" data-v-0639acbf><li data-v-0639acbf><strong data-v-0639acbf>Rule #1</strong> â€” Urutkan <code data-v-0639acbf>final_score</code> <strong data-v-0639acbf>DESC</strong>. </li><li data-v-0639acbf><strong data-v-0639acbf>Rule #2</strong> â€” Jika sama: bandingkan <strong data-v-0639acbf>rerata nilai per bidang</strong> sesuai urutan bidang. </li><li data-v-0639acbf><strong data-v-0639acbf>Rule #3</strong> â€” Jika masih sama: bandingkan <strong data-v-0639acbf>nilai Hakim Ketua</strong> per bidang. </li></ul>',3)),y.value?(a(),l("div",Ge,t[7]||(t[7]=[e("i",{class:"fas fa-users mr-1"},null,-1),m(" Mode GROUP: 1 baris ranking = "),e("strong",null,"Kontingen + Kategori",-1),m(" (Putra/Putri). Anggota digabung. ")]))):K("",!0)]),e("div",Ae,[t[9]||(t[9]=e("div",{class:"text-muted text-xs"},"Hakim Ketua (ID)",-1)),e("div",Ie,[N.value?(a(),l("span",Ee,r(N.value),1)):(a(),l("span",Le,"-"))]),t[10]||(t[10]=e("div",{class:"text-muted text-xs mt-1"},[m(" Kolom hakim ketua ditandai warna "),e("span",{class:"badge badge-warning"},"kuning"),m(". ")],-1))])])])])):K("",!0),H.value?(a(),l("div",Ue,[e("div",Ve,[e("div",Oe,[e("div",ze,[t[13]||(t[13]=e("label",{class:"mb-1 text-sm"},[m("Pilih Kompetisi "),e("span",{class:"text-danger"},"*")],-1)),he(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>$.value=s),class:"form-control form-control-sm",disabled:B.value,onChange:oe},[t[11]||(t[11]=e("option",{value:"",disabled:""},"-- Pilih Kompetisi --",-1)),(a(!0),l(f,null,k(J.value,s=>(a(),l("optgroup",{key:"r-"+s.id,label:s.name},[(a(!0),l(f,null,k(s.competitions,i=>(a(),l("option",{key:i.id,value:String(i.id)},r(i.full_name),9,Qe))),128))],8,qe))),128))],40,We),[[ke,$.value]]),B.value?(a(),l("small",Xe,t[12]||(t[12]=[e("i",{class:"fas fa-spinner fa-spin mr-1"},null,-1),m(" Memuat daftar kompetisi... ")]))):K("",!0)]),e("div",Ye,[e("button",{class:"btn btn-sm btn-outline-secondary w-100",disabled:B.value,onClick:z},t[14]||(t[14]=[e("i",{class:"fas fa-sync mr-1"},null,-1),m(" Refresh Kompetisi ")]),8,Ze)])])])])):K("",!0),p.value&&W.value&&b.value!=="all"&&q.value.length?(a(),l("div",Je,[e("div",et,[t[15]||(t[15]=e("i",{class:"fas fa-award mr-1"},null,-1)),m(" Preview Medali ("+r((u=E.value.find(s=>s.id===b.value))==null?void 0:u.name)+") ",1)]),e("ul",tt,[(a(!0),l(f,null,k(q.value,s=>(a(),l("li",{key:"m-"+(s.group_key||s.event_participant_id)},[m(r(s.medal)+" â€” ",1),e("strong",null,r(y.value?s.full_name||s.contingent:s.full_name),1),m(" ("+r(x(s.final_score))+") â€¢ "+r(s.contingent||"-"),1)]))),128))])])):K("",!0)])]),e("section",st,[e("div",nt,[e("div",lt,[e("div",at,[p.value&&E.value.length?(a(),l("div",it,[e("ul",ot,[(a(!0),l(f,null,k(E.value,s=>(a(),l("li",{class:"nav-item",key:"cat-"+s.id},[e("a",{href:"#",class:j(["nav-link",{active:b.value===s.id}]),onClick:xe(i=>b.value=s.id,["prevent"]),style:{"font-weight":"600"}},[m(r(s.name)+" ",1),e("span",ut,r(s.count),1)],10,rt)]))),128))])])):K("",!0),e("table",dt,[e("thead",ct,[y.value?(a(),l("tr",mt,t[16]||(t[16]=[e("th",{style:{width:"60px"},class:"text-center"},"No",-1),e("th",null,"Kontingen",-1),e("th",null,"Anggota",-1),e("th",{class:"text-center",style:{width:"110px"}},"Hakim",-1),e("th",{class:"text-center",style:{width:"130px"}},"Final Score",-1)]))):(a(),l("tr",vt,t[17]||(t[17]=[e("th",{style:{width:"60px"},class:"text-center"},"Rank",-1),e("th",null,"Peserta",-1),e("th",null,"Kontingen",-1),e("th",{class:"text-center"},"Hakim",-1),e("th",{class:"text-center"},"Final Score",-1)])))]),e("tbody",null,[C.value?(a(),l("tr",gt,[e("td",{colspan:(y.value,5),class:"text-center p-3 text-muted"},"Loading...",8,_t)])):p.value?P.value.length===0?(a(),l("tr",bt,[e("td",{colspan:(y.value,5),class:"text-center p-3 text-muted"},"Belum ada ranking (nilai belum ada?).",8,ht)])):y.value?(a(!0),l(f,{key:3},k(G.value,(s,i)=>(a(),l("tr",{key:s.group_key||i},[e("td",kt,r(i+1),1),e("td",null,[e("div",yt,r(s.full_name||s.contingent||"-"),1),e("div",xt,r(s.category_name||s.category||"-"),1)]),e("td",wt,r(ce(s)),1),e("td",St,r(me(s)),1),e("td",Kt,r(x(s.final_score)),1)]))),128)):(a(!0),l(f,{key:4},k(G.value,s=>(a(),l("tr",{key:s.event_participant_id},[e("td",Rt,r(s.rank),1),e("td",null,[e("div",Ct,r(s.full_name),1),e("div",Nt,r(s.branch||"-")+" â€¢ "+r(s.group||"-")+" â€¢ "+r(s.category||"-"),1)]),e("td",null,r(s.contingent||"-"),1),e("td",Mt,r(s.judge_count??Object.keys(s.scores||{}).length),1),e("td",jt,r(x(s.final_score)),1)]))),128)):(a(),l("tr",ft,[e("td",{colspan:(y.value,5),class:"text-center p-3 text-muted"},"Silakan pilih kompetisi.",8,pt)]))])]),p.value&&b.value!=="all"?(a(),l("div",$t,[e("div",Pt,[e("div",Tt,[t[19]||(t[19]=e("i",{class:"fas fa-list mr-1"},null,-1)),t[20]||(t[20]=m(" Detail Nilai ")),N.value?(a(),l("small",Ft,[t[18]||(t[18]=m("â€¢ Ketua: ")),e("strong",null,r(N.value),1)])):K("",!0)]),e("small",Dt,[t[21]||(t[21]=m(" Kategori: ")),e("strong",null,r(((c=E.value.find(s=>s.id===b.value))==null?void 0:c.name)||"-"),1)])]),O.value?(a(),l("div",Ht,t[22]||(t[22]=[e("i",{class:"fas fa-spinner fa-spin mr-1"},null,-1),m(" Memuat detail nilai... ")]))):v.value.judges.length?y.value?(a(),l("div",Gt,[e("table",At,[e("thead",It,[e("tr",null,[t[23]||(t[23]=e("th",{rowspan:"2",class:"text-center align-middle",style:{width:"30px"}},"#",-1)),t[24]||(t[24]=e("th",{rowspan:"2",class:"align-middle",style:{"min-width":"160px"}},"Kontingen",-1)),t[25]||(t[25]=e("th",{rowspan:"2",class:"align-middle",style:{"min-width":"260px"}},"Anggota",-1)),(a(!0),l(f,null,k(v.value.fields,s=>(a(),l("th",{key:"fh-"+s.id,class:"text-center",colspan:v.value.judges.length+1},r(s.name),9,Et))),128)),t[26]||(t[26]=e("th",{rowspan:"2",class:"text-center align-middle",style:{width:"110px"}},[m(" Final"),e("br"),m("Score ")],-1))]),e("tr",null,[(a(!0),l(f,null,k(v.value.fields,s=>(a(),l(f,{key:"fs-"+s.id},[(a(!0),l(f,null,k(v.value.judges,(i,d)=>(a(),l("th",{key:"fj-"+s.id+"-"+i.id,class:j(["text-center",{"chief-col":F(i.id)}]),style:{width:"70px"},title:F(i.id)?"Hakim Ketua":""},r(ee(d)),11,Lt))),128)),t[27]||(t[27]=e("th",{class:"text-center",style:{width:"90px"}},"Rerata",-1))],64))),128))])]),e("tbody",null,[(a(!0),l(f,null,k(v.value.rows,(s,i)=>(a(),l("tr",{key:s.group_key},[e("td",Ut,r(i+1),1),e("td",null,[e("div",Vt,r(s.contingent),1)]),e("td",Ot,r(s.member_names.join(", ")),1),(a(!0),l(f,null,k(v.value.fields,d=>{var h;return a(),l(f,{key:"bf-"+d.id},[(a(!0),l(f,null,k(v.value.judges,g=>(a(),l("td",{key:"bj-"+s.group_key+"-"+d.id+"-"+g.id,class:j(["text-center",{"chief-col":F(g.id)}]),title:X(s,d.id)},[te(s,g.id,d.id)!=null?(a(),l("span",Wt,r(x(te(s,g.id,d.id))),1)):(a(),l("span",qt,"-"))],10,zt))),128)),e("td",{class:j(["text-center font-weight-bold",{"tie-win":se(s,d.id)}]),title:X(s,d.id)},[((h=s.field_avg)==null?void 0:h[d.id])!=null?(a(),l("span",Xt,r(x(s.field_avg[d.id])),1)):(a(),l("span",Yt,"-"))],10,Qt)],64)}),128)),e("td",Zt,r(x(s.final_score)),1)]))),128))])]),t[28]||(t[28]=e("small",{class:"text-muted d-block mt-2"},[m(" * Mode TEAM: tabel menampilkan nilai per "),e("strong",null,"bidang"),m(" (Tahfizh/Tajwid/dll) lalu per "),e("strong",null,"hakim"),m(" (H1..Hn) + rerata."),e("br"),m(" * Kolom hakim ketua ditandai warna kuning lembut. ")],-1))])):v.value.fields.length?(a(),l("div",es,[e("table",ts,[e("thead",ss,[e("tr",null,[t[29]||(t[29]=e("th",{rowspan:"2",style:{width:"30px"},class:"text-center align-middle"},"#",-1)),t[30]||(t[30]=e("th",{rowspan:"2",style:{"min-width":"220px"},class:"align-middle"},"Peserta",-1)),t[31]||(t[31]=e("th",{rowspan:"2",style:{"min-width":"160px"},class:"align-middle"},"Kontingen",-1)),(a(!0),l(f,null,k(v.value.fields,s=>(a(),l("th",{key:"grp-"+s.id,class:"text-center",colspan:v.value.judges.length+1},r(s.name),9,ns))),128)),t[32]||(t[32]=e("th",{rowspan:"2",class:"text-center align-middle",style:{width:"100px"}},"Final Score",-1))]),e("tr",null,[(a(!0),l(f,null,k(v.value.fields,s=>(a(),l(f,{key:"sub-"+s.id},[(a(!0),l(f,null,k(v.value.judges,(i,d)=>(a(),l("th",{key:"hj-"+s.id+"-"+i.id,class:j(["text-center",{"chief-col":F(i.id)}]),style:{width:"70px"},title:F(i.id)?"Hakim Ketua":""},r(ee(d)),11,ls))),128)),t[33]||(t[33]=e("th",{class:"text-center",style:{width:"90px"}},"Rerata",-1))],64))),128))])]),e("tbody",null,[v.value.rows.length===0?(a(),l("tr",as,[e("td",{colspan:3+v.value.fields.length*(v.value.judges.length+1)+2,class:"text-center text-muted p-3"}," Tidak ada data detail untuk kategori ini. ",8,is)])):K("",!0),(a(!0),l(f,null,k(v.value.rows,s=>(a(),l("tr",{key:"row-"+s.event_participant_id},[e("td",os,r(s.rank),1),e("td",null,[e("div",rs,r(s.full_name),1)]),e("td",null,r(s.contingent||"-"),1),(a(!0),l(f,null,k(v.value.fields,i=>(a(),l(f,{key:"rf-"+s.event_participant_id+"-"+i.id},[(a(!0),l(f,null,k(v.value.judges,d=>(a(),l("td",{key:"cell-"+s.event_participant_id+"-"+i.id+"-"+d.id,class:j(["text-center",{"chief-col":F(d.id)}])},[Q(s,d.id,i.id)!=null?(a(),l("span",us,r(x(Q(s,d.id,i.id))),1)):(a(),l("span",ds,"-"))],2))),128)),e("td",{class:j(["text-center font-weight-bold",{"tie-win":se(s,i.id)}]),title:X(s,i.id)},[U(s,i.id)!=null?(a(),l("span",ms,r(x(U(s,i.id))),1)):(a(),l("span",vs,"-"))],10,cs)],64))),128)),e("td",gs,[s.final_score!=null?(a(),l("span",_s,r(x(s.final_score)),1)):(a(),l("span",fs,"-"))])]))),128))])]),t[34]||(t[34]=e("small",{class:"text-muted d-block mt-2"},[m(" * Highlight hijau = pemenang tie-break pada "),e("strong",null,"bidang pertama"),m(" yang berbeda."),e("br"),m(" * Kolom hakim ketua diwarnai kuning lembut. ")],-1))])):(a(),l("div",Jt," Detail nilai belum tersedia (fields kosong). ")):(a(),l("div",Bt," Detail nilai belum tersedia (judges kosong). "))])):K("",!0)]),e("div",ps,[m(" Total "+r(y.value?"kontingen":"peserta")+": ",1),e("strong",null,r(G.value.length),1)])])])])],64)}}},ws=we(bs,[["__scopeId","data-v-0639acbf"]]);export{ws as default};
