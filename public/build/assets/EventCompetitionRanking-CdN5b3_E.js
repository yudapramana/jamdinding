import{z as _e,y as K,J as j,I as pe,V as fe,K as Z,A as l,B as a,C as e,O as x,S as m,M as u,G as $,ax as he,R as be,aB as ke,U as f,ay as k,a as G,H as ye,D as xe}from"./AuthUserStore-Du_wEH36.js";import{S as R}from"./sweetalert2.esm.all-9Qm2jZ7z.js";import{_ as we}from"./app-D2SkCNoG.js";const Se={class:"content-header"},Ke={class:"container-fluid"},Re={class:"d-flex justify-content-between align-items-center"},Ce={class:"mb-0 text-muted text-sm"},Ne={key:0,class:"ml-2"},Me={key:0,class:"mb-0 mt-1 text-sm text-muted"},je={key:0},$e={class:"btn-group"},Pe=["disabled"],Te=["disabled"],Fe=["disabled"],De=["disabled"],Be={key:0,class:"text-muted d-block mt-1"},Ge={key:1,class:"card mt-3"},He={class:"card-body py-2"},Ae={class:"d-flex justify-content-between align-items-start"},Ee={key:0,class:"text-muted text-xs mt-2"},Le={class:"text-right ml-3",style:{"min-width":"220px"}},Ue={class:"font-weight-bold",style:{"font-size":"1.1rem"}},Ve={key:0},Ie={key:1,class:"text-muted"},Oe={key:2,class:"card mt-3"},ze={class:"card-body py-2"},We={class:"form-row align-items-end"},qe={class:"form-group col-md-8 mb-0"},Qe=["disabled"],Xe=["label"],Ye=["value"],Ze={key:0,class:"text-muted"},Je={class:"form-group col-md-4 mb-0"},et=["disabled"],tt={key:3,class:"alert alert-warning py-2 mb-3",style:{"border-radius":"8px"}},st={class:"font-weight-bold mb-1"},nt={class:"mb-0 pl-3 text-sm"},lt={class:"content"},at={class:"container-fluid"},it={class:"card"},ot={class:"card-body table-responsive p-0"},ut={key:0,class:"mb-2"},rt={class:"nav nav-pills"},dt=["onClick"],ct={class:"badge badge-light border ml-2"},mt={class:"table table-bordered table-hover text-sm mb-0"},vt={class:"thead-light"},gt={key:0},_t={key:1},pt={key:0},ft=["colspan"],ht={key:1},bt=["colspan"],kt={key:2},yt=["colspan"],xt={class:"text-center font-weight-bold"},wt={class:"font-weight-bold"},St={class:"text-muted text-xs"},Kt={class:"text-muted text-xs"},Rt={class:"text-center"},Ct={class:"text-center font-weight-bold"},Nt={class:"text-center font-weight-bold"},Mt={class:"font-weight-bold"},jt={class:"text-muted text-xs"},$t={class:"text-center"},Pt={class:"text-center font-weight-bold"},Tt={key:1,class:"p-2 border-top"},Ft={class:"d-flex justify-content-between align-items-center mb-2"},Dt={class:"font-weight-bold"},Bt={key:0,class:"text-muted ml-2"},Gt={class:"text-muted"},Ht={key:0,class:"text-center text-muted py-3"},At={key:1,class:"text-center text-muted py-3"},Et={key:2,class:"table-responsive"},Lt={class:"table table-bordered table-sm text-sm mb-0"},Ut={class:"thead-light"},Vt=["colspan"],It=["title"],Ot={class:"text-center font-weight-bold"},zt={class:"font-weight-bold"},Wt={class:"text-muted text-xs"},qt=["title"],Qt={key:0},Xt={key:1,class:"text-muted"},Yt=["title"],Zt={key:0},Jt={key:1,class:"text-muted"},es={class:"text-center font-weight-bold"},ts={key:3,class:"text-center text-muted py-3"},ss={key:4,class:"table-responsive"},ns={class:"table table-bordered table-sm text-sm mb-0"},ls={class:"thead-light"},as=["colspan"],is=["title"],os={key:0},us=["colspan"],rs={class:"text-center font-weight-bold"},ds={class:"font-weight-bold"},cs={key:0},ms={key:1,class:"text-muted"},vs=["title"],gs={key:0},_s={key:1,class:"text-muted"},ps={class:"text-center font-weight-bold"},fs={key:0},hs={key:1,class:"text-muted"},bs={class:"card-footer text-muted text-sm"},ks={__name:"EventCompetitionRanking",setup(ys){const J=pe(),le=ye(),O=_e(),H=K(()=>O.eventData||null),F=K(()=>{var s;return((s=H.value)==null?void 0:s.id)||null}),b=j("all"),P=j(String(J.params.id||"")),ee=j([]),A=j(!1),C=j(!1),D=j(null),T=j([]),z=j(!1),p=j({judges:[],fields:[],rows:[]}),N=j(null),h=K(()=>P.value||null),w=K(()=>{var s;return!!((s=D.value)!=null&&s.is_team)}),S=s=>{const t=Number(s);return Number.isFinite(t)?t.toFixed(2):"-"},te=s=>`H${s+1}`,B=s=>{if(!s)return!1;if(N.value!=null)return String(s)===String(N.value);const t=(p.value.judges||[]).find(i=>String(i.id)===String(s));return!!(t!=null&&t.is_chief)},W=async()=>{if(F.value){A.value=!0;try{const{data:s}=await G.get(`/api/v1/events/${F.value}/competitions/tree`,{params:{search:""}});ee.value=s.rounds||[]}catch(s){console.error(s),R.fire("Gagal","Gagal memuat daftar kompetisi.","error")}finally{A.value=!1}}},L=async()=>{if(!h.value){D.value=null,T.value=[],p.value={judges:[],fields:[],rows:[]},N.value=null;return}C.value=!0;try{const{data:s}=await G.get(`/api/v1/event-competitions/${h.value}/ranking`);D.value=s.competition,T.value=s.ranking||[]}catch(s){console.error(s),R.fire("Gagal","Gagal memuat ranking.","error")}finally{C.value=!1}},ae=async()=>{if(h.value){C.value=!0;try{const{data:s}=await G.post(`/api/v1/event-competitions/${h.value}/ranking/recalculate`);T.value=s.ranking||[],R.fire("OK","Ranking dihitung ulang.","success")}catch(s){console.error(s),R.fire("Gagal","Gagal hitung ulang ranking.","error")}finally{C.value=!1}}},ie=async()=>{if(!(!h.value||!(await R.fire({title:"Publish Ranking?",text:"Akan membuat Medal Standings & update Contingent.",icon:"warning",showCancelButton:!0,confirmButtonText:"Publish"})).isConfirmed)){C.value=!0;try{await G.post(`/api/v1/event-competitions/${h.value}/ranking/publish`,{top_n:6}),R.fire("Published","Top 6 berhasil dipublish.","success")}catch(t){console.error(t),R.fire("Gagal","Gagal publish ranking.","error")}finally{C.value=!1}}},oe=async()=>{P.value&&(localStorage.setItem("last_scoring_competition_id",String(P.value)),le.replace({name:"admin.event.ranking.index",params:{id:P.value}}))},q=K(()=>{var t,i;return(((i=(t=D.value)==null?void 0:t.round)==null?void 0:i.name)||"").toString().trim().toLowerCase().includes("final")}),ue=K(()=>{var i,c,v,d;const s=(((c=(i=O.user)==null?void 0:i.role)==null?void 0:c.slug)||"").toString().trim().toLowerCase(),t=(((d=(v=O.user)==null?void 0:v.role)==null?void 0:d.name)||"").toString().trim().toLowerCase();return s==="superadmin"||s==="super_admin"||t==="superadmin"}),U=K(()=>{const s=new Map,t=T.value||[];for(const i of t){const c=String((i==null?void 0:i.event_category_id)??"");if(!c)continue;const v=(i==null?void 0:i.category_name)||(i==null?void 0:i.category)||"-";s.has(c)||s.set(c,{id:c,name:v,count:0}),s.get(c).count++}return[{id:"all",name:"Semua Kontingen",count:t.length},...Array.from(s.values())]}),E=K(()=>b.value==="all"?T.value||[]:(T.value||[]).filter(s=>String(s.event_category_id)===String(b.value))),Q=K(()=>(E.value||[]).slice(0,4).map((t,i)=>({...t,medal:i===0?"ðŸ¥‡ Emas":i===1?"ðŸ¥ˆ Perak":i===2?"ðŸ¥‰ Perunggu":i===3?"4ï¸âƒ£ Peringkat 4":null}))),re=async()=>{if(!(!h.value||b.value==="all"))try{await G.get(`/api/v1/event-competitions/${h.value}/ranking/export`,{params:{event_category_id:b.value}}),R.fire("OK","Data siap diexport (lihat console / lanjutkan Excel).","success")}catch(s){console.error(s),R.fire("Gagal","Gagal export data.","error")}},de=s=>{const t=(s==null?void 0:s.judges)||[],i=(s==null?void 0:s.fields)||[],c=(s==null?void 0:s.participants)||(s==null?void 0:s.rows)||[],v=(i||[]).map(r=>({...r,id:r.id??r.event_field_component_id??null,name:r.name??r.field_name??"-",order_number:r.order_number??999999})).filter(r=>r.id!=null).sort((r,y)=>(r.order_number??999999)-(y.order_number??999999)),d=(c||[]).map(r=>({...r,scores:r.scores||{},field_scores:r.field_scores||{},final_score:r.final_score??r.avg_score??0}));return{judges:t,fields:v,rows:d}},V=async()=>{var s;if(!h.value||b.value==="all"){p.value={judges:[],fields:[],rows:[]},N.value=null;return}z.value=!0;try{const{data:t}=await G.get(`/api/v1/event-competitions/${h.value}/ranking/details`,{params:{event_category_id:b.value,debug:1}});p.value=de(t),N.value=((s=t==null?void 0:t.debug)==null?void 0:s.chief_judge_id)??null}catch(t){console.error(t),p.value={judges:[],fields:[],rows:[]},N.value=null,R.fire("Gagal","Gagal memuat detail nilai.","error")}finally{z.value=!1}},se=(s,t,i)=>{var y,n,o,g;const c=String(t),v=String(i),d=((y=s==null?void 0:s.scores_by_field)==null?void 0:y[c])??((n=s==null?void 0:s.scores_by_field)==null?void 0:n[t]);if(d){const _=(d==null?void 0:d[v])??(d==null?void 0:d[i]);if(_!=null&&_!==""){const M=Number(typeof _=="object"?_.weighted_score??_.score:_);return Number.isFinite(M)?M:null}}const r=((o=s==null?void 0:s.field_scores)==null?void 0:o[c])??((g=s==null?void 0:s.field_scores)==null?void 0:g[t]);if(r){const _=(r==null?void 0:r[v])??(r==null?void 0:r[i]);if(_!=null&&_!==""){const M=Number(typeof _=="object"?_.weighted_score??_.score:_);return Number.isFinite(M)?M:null}}return null},ce=s=>{const t=(s==null?void 0:s.member_count)??null,i=Array.isArray(s==null?void 0:s.member_names)?s.member_names:[];if(!t&&!i.length)return"-";const c=t!=null?`${t} anggota`:`${i.length} anggota`;return i.length?`${c} â€” ${i.join(", ")}`:c},me=s=>Object.keys((s==null?void 0:s.scores)||{}).length,X=(s,t,i)=>{var n,o;const c=String(t),v=String(i),d=((n=s==null?void 0:s.field_scores)==null?void 0:n[c])??((o=s==null?void 0:s.field_scores)==null?void 0:o[t]);if(!d)return null;const r=(d==null?void 0:d[v])??(d==null?void 0:d[i]);if(r==null)return null;if(typeof r=="object"){const g=r.weighted_score??r.score;if(g==null)return null;const _=Number(g);return Number.isFinite(_)?_:null}const y=Number(r);return Number.isFinite(y)?y:null},I=(s,t)=>{const i=(p.value.judges||[]).map(v=>X(s,v.id,t)).filter(v=>Number.isFinite(Number(v)));return i.length?i.reduce((v,d)=>v+Number(d),0)/i.length:null},ve=K(()=>{if(w.value)return new Map;const s=p.value.rows||[],t=p.value.fields||[],i=new Map;for(const v of s){const d=String(Number(v.final_score??0).toFixed(2));i.has(d)||i.set(d,[]),i.get(d).push(v)}const c=new Map;for(const[,v]of i.entries()){if(!v||v.length<=1)continue;let d=null,r=null;for(const y of t){const n=v.map(_=>I(_,y.id)).filter(_=>_!=null);if(!n.length)continue;const o=Math.max(...n),g=Math.min(...n);if(Number(o.toFixed(4))!==Number(g.toFixed(4))){d=y.id,r=o;break}}if(d!=null&&r!=null)for(const n of v){const o=I(n,d);o!=null&&Math.abs(o-r)<=1e-6&&c.set(`${n.event_participant_id}|${d}`,"win")}}return c}),ne=(s,t)=>ve.value.get(`${s.event_participant_id}|${t}`)==="win",ge=K(()=>{var i,c,v,d,r,y,n;const s=new Map,t=((i=p.value)==null?void 0:i.debug)||null;if(!(t!=null&&t.pairs))return s;for(const o of t.pairs){const g=(c=o.decided_by)==null?void 0:c.rule,_=(v=o.decided_by)==null?void 0:v.field_component_id;!g||!_||(((d=o.decided_by)==null?void 0:d.a)>((r=o.decided_by)==null?void 0:r.b)&&s.set(`${o.a.id}|${_}`,{rule:g,field_id:_,value:o.decided_by.a}),((y=o.decided_by)==null?void 0:y.b)>((n=o.decided_by)==null?void 0:n.a)&&s.set(`${o.b.id}|${_}`,{rule:g,field_id:_,value:o.decided_by.b}))}return s}),Y=(s,t)=>{const i=`${s.group_key||s.event_participant_id}|${t}`,c=ge.value.get(i);return c?c.rule===2?`Tie-break Rule #2
Rerata Bidang
Nilai: ${S(c.value)}`:c.rule===3?`Tie-break Rule #3
Hakim Ketua
Nilai: ${S(c.value)}`:null:null};return fe(async()=>{if(!F.value){R.fire("Event belum dipilih","Silakan pilih event melalui Portal Event terlebih dahulu.","info");return}await W(),await L(),await V()}),Z(()=>J.params.id,async s=>{P.value=String(s||""),b.value="all",await L(),await V()}),Z(()=>F.value,async s=>{s&&(b.value="all",await W(),await L(),await V())}),Z(()=>b.value,async()=>{await V()}),(s,t)=>{var i,c,v,d,r,y;return a(),l(f,null,[e("section",Se,[e("div",Ke,[e("div",Re,[e("div",null,[t[3]||(t[3]=e("h1",{class:"mb-1"},"Ranking Kompetisi",-1)),e("p",Ce,[m(u(((i=D.value)==null?void 0:i.full_name)||"Pilih kompetisi untuk melihat ranking.")+" ",1),h.value&&D.value?(a(),l("span",Ne,[e("span",{class:$(["badge",w.value?"badge-dark":"badge-secondary"])},u(w.value?"TEAM":"INDIVIDU"),3)])):x("",!0)]),F.value?(a(),l("p",Me,[t[1]||(t[1]=m(" Event aktif: ")),e("strong",null,u((c=H.value)==null?void 0:c.event_name),1),(v=H.value)!=null&&v.event_year?(a(),l("span",je," ("+u(H.value.event_year)+")",1)):x("",!0),t[2]||(t[2]=m(" â€¢ Lokasi: ")),e("strong",null,u(((d=H.value)==null?void 0:d.event_location)||"-"),1)])):x("",!0)]),e("div",$e,[e("button",{class:"btn btn-sm btn-outline-secondary",onClick:L,disabled:C.value||!h.value},t[4]||(t[4]=[e("i",{class:"fas fa-sync"},null,-1),m(" Refresh ")]),8,Pe),e("button",{class:"btn btn-sm btn-primary",onClick:ae,disabled:C.value||!h.value},t[5]||(t[5]=[e("i",{class:"fas fa-calculator"},null,-1),m(" Hitung Ulang ")]),8,Te),e("button",{class:"btn btn-sm btn-success",onClick:ie,disabled:C.value||!h.value||b.value==="all"||E.value.length===0||!q.value||!ue.value},t[6]||(t[6]=[e("i",{class:"fas fa-award"},null,-1),m(" Publish Top 6 ")]),8,Fe),e("button",{class:"btn btn-sm btn-outline-success",disabled:!h.value||b.value==="all",onClick:re},t[7]||(t[7]=[e("i",{class:"fas fa-file-excel"},null,-1),m(" Export ")]),8,De)])]),h.value&&b.value==="all"?(a(),l("small",Be,t[8]||(t[8]=[e("i",{class:"fas fa-info-circle mr-1"},null,-1),m(" Pilih tab kategori (Putra/Putri) untuk publish & melihat detail nilai. ")]))):x("",!0),h.value&&q.value&&b.value!=="all"&&Q.value.length?(a(),l("div",Ge,[e("div",He,[e("div",Ae,[e("div",null,[t[10]||(t[10]=he('<div class="font-weight-bold mb-1" data-v-066380c4><i class="fas fa-info-circle mr-1" data-v-066380c4></i> Mekanisme Penilaian &amp; Tie-break </div><div class="text-muted text-sm" data-v-066380c4> Ranking ditentukan berdasarkan <strong data-v-066380c4>Final Score</strong>. Jika terjadi nilai sama, sistem memakai urutan bidang dari <strong data-v-066380c4>Komponen Nilai Bidang</strong> (diurutkan berdasarkan urutan prioritas naik; null dianggap paling akhir) sebagai prioritas tie-break. </div><ul class="text-sm mb-0 mt-2 pl-3" data-v-066380c4><li data-v-066380c4><strong data-v-066380c4>Rule #1</strong> â€” Urutkan <code data-v-066380c4>final_score</code> <strong data-v-066380c4>DESC</strong>. </li><li data-v-066380c4><strong data-v-066380c4>Rule #2</strong> â€” Jika sama: bandingkan <strong data-v-066380c4>rerata nilai per bidang</strong> sesuai urutan bidang. </li><li data-v-066380c4><strong data-v-066380c4>Rule #3</strong> â€” Jika masih sama: bandingkan <strong data-v-066380c4>nilai Hakim Ketua</strong> per bidang. </li></ul>',3)),w.value?(a(),l("div",Ee,t[9]||(t[9]=[e("i",{class:"fas fa-users mr-1"},null,-1),m(" Mode GROUP: 1 baris ranking = "),e("strong",null,"Kontingen + Kategori",-1),m(" (Putra/Putri). Anggota digabung. ")]))):x("",!0)]),e("div",Le,[t[11]||(t[11]=e("div",{class:"text-muted text-xs"},"Hakim Ketua (ID)",-1)),e("div",Ue,[N.value?(a(),l("span",Ve,u(N.value),1)):(a(),l("span",Ie,"-"))]),t[12]||(t[12]=e("div",{class:"text-muted text-xs mt-1"},[m(" Kolom hakim ketua ditandai warna "),e("span",{class:"badge badge-warning"},"kuning"),m(". ")],-1))])])])])):x("",!0),F.value?(a(),l("div",Oe,[e("div",ze,[e("div",We,[e("div",qe,[t[15]||(t[15]=e("label",{class:"mb-1 text-sm"},[m("Pilih Kompetisi "),e("span",{class:"text-danger"},"*")],-1)),be(e("select",{"onUpdate:modelValue":t[0]||(t[0]=n=>P.value=n),class:"form-control form-control-sm",disabled:A.value,onChange:oe},[t[13]||(t[13]=e("option",{value:"",disabled:""},"-- Pilih Kompetisi --",-1)),(a(!0),l(f,null,k(ee.value,n=>(a(),l("optgroup",{key:"r-"+n.id,label:n.name},[(a(!0),l(f,null,k(n.competitions,o=>(a(),l("option",{key:o.id,value:String(o.id)},u(o.full_name),9,Ye))),128))],8,Xe))),128))],40,Qe),[[ke,P.value]]),A.value?(a(),l("small",Ze,t[14]||(t[14]=[e("i",{class:"fas fa-spinner fa-spin mr-1"},null,-1),m(" Memuat daftar kompetisi... ")]))):x("",!0)]),e("div",Je,[e("button",{class:"btn btn-sm btn-outline-secondary w-100",disabled:A.value,onClick:W},t[16]||(t[16]=[e("i",{class:"fas fa-sync mr-1"},null,-1),m(" Refresh Kompetisi ")]),8,et)])])])])):x("",!0),h.value&&q.value&&b.value!=="all"&&Q.value.length?(a(),l("div",tt,[e("div",st,[t[17]||(t[17]=e("i",{class:"fas fa-award mr-1"},null,-1)),m(" Preview Medali ("+u((r=U.value.find(n=>n.id===b.value))==null?void 0:r.name)+") ",1)]),e("ul",nt,[(a(!0),l(f,null,k(Q.value,n=>(a(),l("li",{key:"m-"+(n.group_key||n.event_participant_id)},[m(u(n.medal)+" â€” ",1),e("strong",null,u(w.value?n.full_name||n.contingent:n.full_name),1),m(" ("+u(S(n.final_score))+") â€¢ "+u(n.contingent||"-"),1)]))),128))])])):x("",!0)])]),e("section",lt,[e("div",at,[e("div",it,[e("div",ot,[h.value&&U.value.length?(a(),l("div",ut,[e("ul",rt,[(a(!0),l(f,null,k(U.value,n=>(a(),l("li",{class:"nav-item",key:"cat-"+n.id},[e("a",{href:"#",class:$(["nav-link",{active:b.value===n.id}]),onClick:xe(o=>b.value=n.id,["prevent"]),style:{"font-weight":"600"}},[m(u(n.name)+" ",1),e("span",ct,u(n.count),1)],10,dt)]))),128))])])):x("",!0),e("table",mt,[e("thead",vt,[w.value?(a(),l("tr",gt,t[18]||(t[18]=[e("th",{style:{width:"60px"},class:"text-center"},"No",-1),e("th",null,"Kontingen",-1),e("th",null,"Anggota",-1),e("th",{class:"text-center",style:{width:"110px"}},"Hakim",-1),e("th",{class:"text-center",style:{width:"130px"}},"Final Score",-1)]))):(a(),l("tr",_t,t[19]||(t[19]=[e("th",{style:{width:"60px"},class:"text-center"},"Rank",-1),e("th",null,"Peserta",-1),e("th",null,"Kontingen",-1),e("th",{class:"text-center"},"Hakim",-1),e("th",{class:"text-center"},"Final Score",-1)])))]),e("tbody",null,[C.value?(a(),l("tr",pt,[e("td",{colspan:(w.value,5),class:"text-center p-3 text-muted"},"Loading...",8,ft)])):h.value?T.value.length===0?(a(),l("tr",kt,[e("td",{colspan:(w.value,5),class:"text-center p-3 text-muted"},"Belum ada ranking (nilai belum ada?).",8,yt)])):w.value?(a(!0),l(f,{key:3},k(E.value,(n,o)=>(a(),l("tr",{key:n.group_key||o},[e("td",xt,u(o+1),1),e("td",null,[e("div",wt,u(n.full_name||n.contingent||"-"),1),e("div",St,u(n.category_name||n.category||"-"),1)]),e("td",Kt,u(ce(n)),1),e("td",Rt,u(me(n)),1),e("td",Ct,u(S(n.final_score)),1)]))),128)):(a(!0),l(f,{key:4},k(E.value,n=>(a(),l("tr",{key:n.event_participant_id},[e("td",Nt,u(n.rank),1),e("td",null,[e("div",Mt,u(n.full_name),1),e("div",jt,u(n.branch||"-")+" â€¢ "+u(n.group||"-")+" â€¢ "+u(n.category||"-"),1)]),e("td",null,u(n.contingent||"-"),1),e("td",$t,u(n.judge_count??Object.keys(n.scores||{}).length),1),e("td",Pt,u(S(n.final_score)),1)]))),128)):(a(),l("tr",ht,[e("td",{colspan:(w.value,5),class:"text-center p-3 text-muted"},"Silakan pilih kompetisi.",8,bt)]))])]),h.value&&b.value!=="all"?(a(),l("div",Tt,[e("div",Ft,[e("div",Dt,[t[21]||(t[21]=e("i",{class:"fas fa-list mr-1"},null,-1)),t[22]||(t[22]=m(" Detail Nilai ")),N.value?(a(),l("small",Bt,[t[20]||(t[20]=m("â€¢ Ketua: ")),e("strong",null,u(N.value),1)])):x("",!0)]),e("small",Gt,[t[23]||(t[23]=m(" Kategori: ")),e("strong",null,u(((y=U.value.find(n=>n.id===b.value))==null?void 0:y.name)||"-"),1)])]),z.value?(a(),l("div",Ht,t[24]||(t[24]=[e("i",{class:"fas fa-spinner fa-spin mr-1"},null,-1),m(" Memuat detail nilai... ")]))):p.value.judges.length?w.value?(a(),l("div",Et,[e("table",Lt,[e("thead",Ut,[e("tr",null,[t[25]||(t[25]=e("th",{rowspan:"2",class:"text-center align-middle",style:{width:"30px"}},"#",-1)),t[26]||(t[26]=e("th",{rowspan:"2",class:"align-middle",style:{"min-width":"160px"}},"Kontingen",-1)),t[27]||(t[27]=e("th",{rowspan:"2",class:"align-middle",style:{"min-width":"260px"}},"Anggota",-1)),(a(!0),l(f,null,k(p.value.fields,n=>(a(),l("th",{key:"fh-"+n.id,class:"text-center",colspan:p.value.judges.length+1},u(n.name),9,Vt))),128)),t[28]||(t[28]=e("th",{rowspan:"2",class:"text-center align-middle",style:{width:"110px"}},[m(" Final"),e("br"),m("Score ")],-1))]),e("tr",null,[(a(!0),l(f,null,k(p.value.fields,n=>(a(),l(f,{key:"fs-"+n.id},[(a(!0),l(f,null,k(p.value.judges,(o,g)=>(a(),l("th",{key:"fj-"+n.id+"-"+o.id,class:$(["text-center",{"chief-col":B(o.id)}]),style:{width:"70px"},title:B(o.id)?"Hakim Ketua":""},u(te(g)),11,It))),128)),t[29]||(t[29]=e("th",{class:"text-center",style:{width:"90px"}},"Rerata",-1))],64))),128))])]),e("tbody",null,[(a(!0),l(f,null,k(p.value.rows,(n,o)=>(a(),l("tr",{key:n.group_key},[e("td",Ot,u(o+1),1),e("td",null,[e("div",zt,u(n.contingent),1)]),e("td",Wt,u(n.member_names.join(", ")),1),(a(!0),l(f,null,k(p.value.fields,g=>{var _;return a(),l(f,{key:"bf-"+g.id},[(a(!0),l(f,null,k(p.value.judges,M=>(a(),l("td",{key:"bj-"+n.group_key+"-"+g.id+"-"+M.id,class:$(["text-center",{"chief-col":B(M.id)}]),title:Y(n,g.id)},[se(n,M.id,g.id)!=null?(a(),l("span",Qt,u(S(se(n,M.id,g.id))),1)):(a(),l("span",Xt,"-"))],10,qt))),128)),e("td",{class:$(["text-center font-weight-bold",{"tie-win":ne(n,g.id)}]),title:Y(n,g.id)},[((_=n.field_avg)==null?void 0:_[g.id])!=null?(a(),l("span",Zt,u(S(n.field_avg[g.id])),1)):(a(),l("span",Jt,"-"))],10,Yt)],64)}),128)),e("td",es,u(S(n.final_score)),1)]))),128))])]),t[30]||(t[30]=e("small",{class:"text-muted d-block mt-2"},[m(" * Mode TEAM: tabel menampilkan nilai per "),e("strong",null,"bidang"),m(" (Tahfizh/Tajwid/dll) lalu per "),e("strong",null,"hakim"),m(" (H1..Hn) + rerata."),e("br"),m(" * Kolom hakim ketua ditandai warna kuning lembut. ")],-1))])):p.value.fields.length?(a(),l("div",ss,[e("table",ns,[e("thead",ls,[e("tr",null,[t[31]||(t[31]=e("th",{rowspan:"2",style:{width:"30px"},class:"text-center align-middle"},"#",-1)),t[32]||(t[32]=e("th",{rowspan:"2",style:{"min-width":"220px"},class:"align-middle"},"Peserta",-1)),t[33]||(t[33]=e("th",{rowspan:"2",style:{"min-width":"160px"},class:"align-middle"},"Kontingen",-1)),(a(!0),l(f,null,k(p.value.fields,n=>(a(),l("th",{key:"grp-"+n.id,class:"text-center",colspan:p.value.judges.length+1},u(n.name),9,as))),128)),t[34]||(t[34]=e("th",{rowspan:"2",class:"text-center align-middle",style:{width:"100px"}},"Final Score",-1))]),e("tr",null,[(a(!0),l(f,null,k(p.value.fields,n=>(a(),l(f,{key:"sub-"+n.id},[(a(!0),l(f,null,k(p.value.judges,(o,g)=>(a(),l("th",{key:"hj-"+n.id+"-"+o.id,class:$(["text-center",{"chief-col":B(o.id)}]),style:{width:"70px"},title:B(o.id)?"Hakim Ketua":""},u(te(g)),11,is))),128)),t[35]||(t[35]=e("th",{class:"text-center",style:{width:"90px"}},"Rerata",-1))],64))),128))])]),e("tbody",null,[p.value.rows.length===0?(a(),l("tr",os,[e("td",{colspan:3+p.value.fields.length*(p.value.judges.length+1)+2,class:"text-center text-muted p-3"}," Tidak ada data detail untuk kategori ini. ",8,us)])):x("",!0),(a(!0),l(f,null,k(p.value.rows,n=>(a(),l("tr",{key:"row-"+n.event_participant_id},[e("td",rs,u(n.rank),1),e("td",null,[e("div",ds,u(n.full_name),1)]),e("td",null,u(n.contingent||"-"),1),(a(!0),l(f,null,k(p.value.fields,o=>(a(),l(f,{key:"rf-"+n.event_participant_id+"-"+o.id},[(a(!0),l(f,null,k(p.value.judges,g=>(a(),l("td",{key:"cell-"+n.event_participant_id+"-"+o.id+"-"+g.id,class:$(["text-center",{"chief-col":B(g.id)}])},[X(n,g.id,o.id)!=null?(a(),l("span",cs,u(S(X(n,g.id,o.id))),1)):(a(),l("span",ms,"-"))],2))),128)),e("td",{class:$(["text-center font-weight-bold",{"tie-win":ne(n,o.id)}]),title:Y(n,o.id)},[I(n,o.id)!=null?(a(),l("span",gs,u(S(I(n,o.id))),1)):(a(),l("span",_s,"-"))],10,vs)],64))),128)),e("td",ps,[n.final_score!=null?(a(),l("span",fs,u(S(n.final_score)),1)):(a(),l("span",hs,"-"))])]))),128))])]),t[36]||(t[36]=e("small",{class:"text-muted d-block mt-2"},[m(" * Highlight hijau = pemenang tie-break pada "),e("strong",null,"bidang pertama"),m(" yang berbeda."),e("br"),m(" * Kolom hakim ketua diwarnai kuning lembut. ")],-1))])):(a(),l("div",ts," Detail nilai belum tersedia (fields kosong). ")):(a(),l("div",At," Detail nilai belum tersedia (judges kosong). "))])):x("",!0)]),e("div",bs,[m(" Total "+u(w.value?"kontingen":"peserta")+": ",1),e("strong",null,u(E.value.length),1)])])])])],64)}}},Ks=we(ks,[["__scopeId","data-v-066380c4"]]);export{Ks as default};
