import{z as At,y as p,A as $,M as Dt,O as q,V as Et,B as o,C as l,D as a,I as S,J as d,K as g,H as Z,S as Q,aB as dt,U as x,ay as L,a as D,as as mt}from"./AuthUserStore-D7C5-kPo.js";import{S as y}from"./sweetalert2.esm.all-9Qm2jZ7z.js";import{_ as Rt}from"./app-BBalU50U.js";const Kt={class:"content-header"},Ut={class:"container-fluid"},Ft={class:"d-flex justify-content-between align-items-center"},jt={class:"mb-0 text-muted text-sm"},Ot={key:0,class:"text-muted text-sm mt-1"},Wt={class:"btn-group"},qt=["disabled"],zt={key:0,class:"text-danger text-sm mt-2 mb-0"},Ht={class:"content"},Jt={class:"container-fluid"},Qt={class:"card"},Xt={class:"card-header"},Yt={class:"form-row"},Zt={class:"form-group col-md-6 mb-2"},te=["disabled"],ee=["label"],ae=["value"],ne={key:0,class:"text-muted"},se={class:"form-group col-md-6 mb-2"},ie={class:"mb-1 text-sm"},oe=["disabled"],le={value:"",disabled:""},re={key:0,value:"",disabled:""},ue=["label"],de={disabled:"",class:"opt-contingent-header"},me=["value"],ce={key:0,class:"text-muted"},ve={key:1,class:"text-muted"},ge={key:0,class:"card"},fe={class:"card-header d-flex justify-content-between align-items-center"},be={key:0,class:"text-muted text-sm"},pe={class:"btn-group"},_e=["disabled"],he={key:0,class:"card-body p-0 table-responsive"},ye={class:"table table-bordered table-hover text-sm mb-0"},ke={class:"thead-light"},xe={class:"d-flex flex-column align-items-center"},we={class:"font-weight-bold"},Se={class:"text-muted text-xs mt-1"},Me={class:"badge badge-light border"},Ne={class:"d-flex justify-content-between align-items-start"},Ce={class:"text-muted text-xs mt-1"},Be={class:"badge badge-light border"},$e={class:"form-row no-gutters"},Te={class:"col-5 pr-1"},Le=["disabled","max","onUpdate:modelValue","onInput"],Ge={class:"text-muted text-xs d-block mt-1"},Ie={class:"col-7"},Pe=["disabled","onUpdate:modelValue"],Ve={class:"bg-light"},Ae={class:"badge badge-primary"},De={class:"bg-light"},Ee=["colspan"],Re={class:"badge badge-warning",style:{"font-size":"13px"}},Ke={key:1,class:"card-body"},Ue={key:0,class:"text-center py-4"},Fe={key:1,class:"text-center py-4 text-muted"},je={class:"card-footer"},Oe={class:"d-flex justify-content-between align-items-start flex-wrap"},We={key:0,class:"alert alert-warning py-2 mb-2",style:{"border-radius":"8px","max-width":"680px"}},qe={class:"d-flex align-items-start"},ze={class:"mb-0 mt-1 text-sm"},He={class:"btn-group mt-2 mt-sm-0"},Je=["disabled"],Qe={key:0,class:"fas fa-spinner fa-spin mr-1"},Xe=["disabled"],Ye=["disabled"],Ze={key:1,class:"alert alert-info",style:{"border-radius":"8px"}},E=3,ta={__name:"EventCompetitionScoring",setup(ea){const z=Dt(),ct=At(),vt=p(()=>ct.eventData||null),C=p(()=>{var e;return((e=vt.value)==null?void 0:e.id)||null}),_=$(String(z.params.id||"")),k=$(String(z.query.event_participant_id||"")),M=$(null),w=p(()=>{var e,t;return!!((t=(e=M.value)==null?void 0:e.event_group)!=null&&t.is_team)}),U=$(!1),F=$(!1),tt=$([]),j=$([]),et=e=>{var t,s;return((t=e==null?void 0:e.event_category)==null?void 0:t.full_name)||(e==null?void 0:e.category_name)||((s=e==null?void 0:e.eventCategory)==null?void 0:s.full_name)||"-"},at=e=>((e==null?void 0:e.contingent)??"").toString().trim()||"-",gt=(e,t,s)=>{var u,n,c;console.log("p"),console.log(e);const i=(t||et(e)||"-").toString().trim(),v=(s||at(e)).toString().trim();if(w.value)return((e==null?void 0:e.team_name)||(e==null?void 0:e.contingent)||"Tim").toString().trim(),(e==null?void 0:e.member_count)!=null&&`${e.member_count}`,`${e!=null&&e.member_names&&e.member_names.length?`  ${e.member_names.join(", ")}${e!=null&&e.member_count&&e.member_names.length<e.member_count?", ...":""}`:""}`;const r=(((u=e==null?void 0:e.participant)==null?void 0:u.full_name)||(e==null?void 0:e.full_name)||"Peserta").toString().trim(),f=(((n=e==null?void 0:e.participant)==null?void 0:n.nik)||(e==null?void 0:e.nik)||"").toString().trim(),m=((c=e==null?void 0:e.participant)==null?void 0:c.participant_number).toString().trim();return m?`${m} - ${r} (${f})`:`${i} - ${v} - ${r}`},nt=p(()=>{var v;const e=j.value||[],t=new Map;for(const r of e){const f=et(r)||"-",m=String((r==null?void 0:r.event_category_id)??((v=r==null?void 0:r.event_category)==null?void 0:v.id)??f);t.has(m)||t.set(m,{id:m,name:f,count:0,contMap:new Map});const u=t.get(m);u.count++;const n=at(r);u.contMap.has(n)||u.contMap.set(n,{name:n,count:0,items:[]});const c=u.contMap.get(n);c.count++,c.items.push(r)}const s=(r,f)=>r.localeCompare(f,"id",{sensitivity:"base"});return Array.from(t.values()).map(r=>{const f=Array.from(r.contMap.values()).map(m=>(m.items.sort((u,n)=>{var I,K;const c=(((I=u==null?void 0:u.participant)==null?void 0:I.full_name)||(u==null?void 0:u.full_name)||(u==null?void 0:u.team_name)||(u==null?void 0:u.contingent)||"").toString(),b=(((K=n==null?void 0:n.participant)==null?void 0:K.full_name)||(n==null?void 0:n.full_name)||(n==null?void 0:n.team_name)||(n==null?void 0:n.contingent)||"").toString();return s(c,b)}),m)).sort((m,u)=>s(m.name,u.name));return{id:r.id,name:r.name,count:r.count,contingents:f}}).sort((r,f)=>s(r.name,f.name))}),O=$(!1),h=$(null),B=p(()=>{var e;return((e=h.value)==null?void 0:e.judges)||[]}),P=p(()=>{var e;return((e=h.value)==null?void 0:e.components)||[]}),st=p(()=>{var e;return((e=h.value)==null?void 0:e.scoresheets)||[]}),N=$({}),T=$(!1),ft=e=>{var s,i,v,r;const t=[];for(const f of B.value||[]){const m=(r=(v=(i=(s=N.value)==null?void 0:s[f.id])==null?void 0:i.itemsMap)==null?void 0:v[e])==null?void 0:r.score;m==null||m===""||t.push(Number(m))}return t},it=e=>{const t=ft(e);if(!t.length)return{ok:!0,diff:0,min:null,max:null};const s=Math.min(...t),i=Math.max(...t),v=Math.round((i-s)*100)/100;return{ok:v<=E,diff:v,min:s,max:i}},ot=p(()=>{const e=[];for(const t of P.value||[]){const s=it(t.id);s.ok||e.push({component_id:t.id,field_name:t.field_name,...s})}return e}),V=p(()=>ot.value.length===0),bt=e=>e==="draft"?"badge-secondary":e==="submitted"?"badge-success":e==="locked"?"badge-danger":"badge-light",G=e=>Number(e||0).toFixed(2),H=e=>{const t=(st.value||[]).find(s=>String(s.judge_id)===String(e));return(t==null?void 0:t.status)||null},J=e=>H(e)==="locked",lt=(e,t)=>{var r,f,m,u;const s=P.value.find(n=>String(n.id)===String(t)),i=Number(((u=(m=(f=(r=N.value)==null?void 0:r[e])==null?void 0:f.itemsMap)==null?void 0:m[t])==null?void 0:u.score)||0),v=Number((s==null?void 0:s.weight)||0);return v?i*(v/100):i},X=e=>{let t=0;for(const s of P.value||[])t+=Number(lt(e,s.id)||0);return Math.round(t*100)/100},pt=p(()=>{const e=B.value||[];if(!e.length)return 0;const t=e.reduce((s,i)=>s+Number(X(i.id)||0),0);return Math.round(t/e.length*100)/100}),_t=e=>{const t=Number((e==null?void 0:e.max_score)||0),s=Number((e==null?void 0:e.weight)||0);return s?t*(s/100):t},ht=(e,t)=>{const s=P.value.find(r=>String(r.id)===String(t)),i=Number((s==null?void 0:s.max_score)||0);let v=Number(N.value[e].itemsMap[t].score||0);v<0&&(v=0),i>0&&v>i&&(v=i),N.value[e].itemsMap[t].score=v},A=p(()=>{const e=st.value||[];return e.length?e.some(t=>t.status==="locked")?"locked":e.some(t=>t.status==="submitted")?"submitted":e.some(t=>t.status==="draft")?"draft":"new":"new"}),yt=p(()=>A.value==="new"||A.value==="draft"),kt=p(()=>A.value==="draft"),xt=p(()=>A.value==="submitted"),wt=p(()=>B.value.some(e=>!J(e.id))),St=p(()=>B.value.some(e=>!J(e.id))),Mt=p(()=>B.value.length>0),Nt=p(()=>T.value||!wt.value||A.value==="locked"||!V.value),Ct=p(()=>T.value||!St.value||A.value!=="draft"||!V.value),Bt=p(()=>T.value||!Mt.value||A.value!=="submitted"||!V.value),$t=async()=>{if(C.value){U.value=!0;try{const{data:e}=await D.get(`/api/v1/events/${C.value}/competitions/tree`,{params:{search:""}});tt.value=e.rounds||[]}catch(e){console.error(e),y.fire("Gagal","Gagal memuat daftar kompetisi.","error")}finally{U.value=!1}}},rt=async()=>{if(!_.value){M.value=null;return}try{const{data:e}=await D.get(`/api/v1/event-competitions/${_.value}`);M.value=e}catch(e){console.error(e),M.value=null,y.fire("Gagal","Gagal memuat info kompetisi.","error")}},ut=async()=>{var t;if(!C.value)return;const e=(t=M.value)==null?void 0:t.event_group_id;if(!e){j.value=[];return}F.value=!0;try{const{data:s}=await D.get(`/api/v1/events/${C.value}/participants/simple`,{params:{per_page:2e3,event_group_id:e,is_team:w.value?1:0,only_verified:1}});j.value=s.data||s||[]}catch(s){console.error(s),y.fire("Gagal",`Gagal memuat daftar ${w.value?"tim":"peserta"}.`,"error")}finally{F.value=!1}},R=async()=>{var e,t;if(!(!_.value||!k.value)){O.value=!0;try{const{data:s}=await D.get(`/api/v1/event-competitions/${_.value}/scoring/form`,{params:{event_participant_id:k.value}});h.value=s,Tt()}catch(s){console.error(s),y.fire("Gagal",((t=(e=s==null?void 0:s.response)==null?void 0:e.data)==null?void 0:t.message)||"Gagal memuat form penilaian.","error")}finally{O.value=!1}}},Tt=()=>{var v,r,f;const e=((v=h.value)==null?void 0:v.judges)||[],t=((r=h.value)==null?void 0:r.components)||[],s=((f=h.value)==null?void 0:f.scoresheets)||[],i={};for(const m of e){const u=s.find(b=>String(b.judge_id)===String(m.id)),n=(u==null?void 0:u.items)||[],c={};for(const b of t){const I=n.find(Vt=>String(Vt.event_field_component_id)===String(b.id)),K=Number((b==null?void 0:b.max_score)||0);let W=Number((I==null?void 0:I.score)??0);W<0&&(W=0),K>0&&W>K&&(W=K),c[b.id]={event_field_component_id:b.id,score:W,notes:(I==null?void 0:I.notes)??""}}i[m.id]={judge_id:m.id,status:(u==null?void 0:u.status)||"draft",itemsMap:c}}N.value=i},Lt=()=>{var t;const e=[];for(const s of B.value||[]){const i=(t=N.value)==null?void 0:t[s.id];if(!i)continue;const v=(P.value||[]).map(r=>{var f,m,u,n;return{event_field_component_id:r.id,score:Number(((m=(f=i.itemsMap)==null?void 0:f[r.id])==null?void 0:m.score)??0),notes:((n=(u=i.itemsMap)==null?void 0:u[r.id])==null?void 0:n.notes)??null}});e.push({judge_id:s.id,items:v})}return e},Gt=async()=>{var t,s;if(!_.value||!k.value)return;if(!V.value){y.fire("Tidak bisa menyimpan",`Selisih nilai antar hakim pada satu bidang tidak boleh > ${E} poin.`,"warning");return}if((await y.fire({title:"Simpan draft?",text:"Nilai akan disimpan sebagai draft untuk semua hakim.",icon:"question",showCancelButton:!0,confirmButtonText:"Simpan",cancelButtonText:"Batal"})).isConfirmed){T.value=!0;try{await D.post(`/api/v1/event-competitions/${_.value}/scoring/draft`,{event_participant_id:k.value,rows:Lt()}),y.fire("Berhasil","Draft tersimpan.","success"),await R()}catch(i){console.error(i),y.fire("Gagal",((s=(t=i==null?void 0:i.response)==null?void 0:t.data)==null?void 0:s.message)||"Gagal menyimpan draft.","error")}finally{T.value=!1}}},It=async()=>{var t,s;if(!_.value||!k.value)return;if(!V.value){y.fire("Tidak bisa menyimpan",`Selisih nilai antar hakim pada satu bidang tidak boleh > ${E} poin.`,"warning");return}if((await y.fire({title:"Submit nilai?",text:"Status nilai akan menjadi submitted (selama belum locked).",icon:"warning",showCancelButton:!0,confirmButtonText:"Submit",cancelButtonText:"Batal"})).isConfirmed){T.value=!0;try{await D.post(`/api/v1/event-competitions/${_.value}/scoring/submit`,{event_participant_id:k.value}),y.fire("Berhasil","Nilai submitted.","success"),await R()}catch(i){console.error(i),y.fire("Gagal",((s=(t=i==null?void 0:i.response)==null?void 0:t.data)==null?void 0:s.message)||"Gagal submit nilai.","error")}finally{T.value=!1}}},Pt=async()=>{var t,s;if(!_.value||!k.value)return;if(!V.value){y.fire("Tidak bisa menyimpan",`Selisih nilai antar hakim pada satu bidang tidak boleh > ${E} poin.`,"warning");return}if((await y.fire({title:"Lock nilai?",text:"Nilai akan dikunci dan tidak bisa diubah lagi.",icon:"warning",showCancelButton:!0,confirmButtonText:"Lock",cancelButtonText:"Batal",confirmButtonColor:"#d33"})).isConfirmed){T.value=!0;try{await D.post(`/api/v1/event-competitions/${_.value}/scoring/lock`,{event_participant_id:k.value}),y.fire("Berhasil","Nilai locked.","success"),await R()}catch(i){console.error(i),y.fire("Gagal",((s=(t=i==null?void 0:i.response)==null?void 0:t.data)==null?void 0:s.message)||"Gagal lock nilai.","error")}finally{T.value=!1}}},Y=async()=>{await $t(),_.value?(await rt(),await ut()):(j.value=[],M.value=null),_.value&&k.value&&await R()};return q(()=>z.params.id,e=>{_.value=String(e||"")}),q(()=>z.query.event_participant_id,e=>{k.value=String(e||"")}),q(()=>C.value,async e=>{e&&await Y()}),q(()=>_.value,async e=>{k.value="",h.value=null,N.value={},j.value=[],M.value=null,e&&(await rt(),await ut())}),q(()=>k.value,async e=>{h.value=null,N.value={},e&&await R()}),Et(async()=>{if(!C.value){y.fire("Event belum dipilih","Silakan pilih event melalui Portal Event terlebih dahulu.","info");return}await Y()}),(e,t)=>{var s,i,v,r,f,m,u;return l(),o(x,null,[a("section",Kt,[a("div",Ut,[a("div",Ft,[a("div",null,[t[4]||(t[4]=a("h1",{class:"mb-1"},"Input Nilai Kompetisi",-1)),a("p",jt," Pilih kompetisi & "+d(w.value?"tim":"peserta")+", lalu input nilai per hakim untuk semua komponen penilaian. ",1),M.value?(l(),o("div",Ot,[t[2]||(t[2]=g(" Group: ")),a("strong",null,d(((i=(s=M.value)==null?void 0:s.event_group)==null?void 0:i.full_name)||"#"+(((v=M.value)==null?void 0:v.event_group_id)||"-")),1),t[3]||(t[3]=g(" • Mode: ")),a("span",{class:Z(["badge",w.value?"badge-info":"badge-light border"])},d(w.value?"TEAM":"INDIVIDUAL"),3)])):S("",!0)]),a("div",Wt,[a("button",{class:"btn btn-sm btn-outline-secondary",disabled:!C.value||U.value,onClick:Y},t[5]||(t[5]=[a("i",{class:"fas fa-sync mr-1"},null,-1),g(" Refresh ")]),8,qt)])]),C.value?S("",!0):(l(),o("p",zt,t[6]||(t[6]=[a("i",{class:"fas fa-exclamation-triangle mr-1"},null,-1),g(" Event belum dipilih. Silakan pilih event melalui Portal Event terlebih dahulu. ")])))])]),a("section",Ht,[a("div",Jt,[a("div",Qt,[a("div",Xt,[a("div",Yt,[a("div",Zt,[t[9]||(t[9]=a("label",{class:"mb-1 text-sm"},[g("Kompetisi "),a("span",{class:"text-danger"},"*")],-1)),Q(a("select",{"onUpdate:modelValue":t[0]||(t[0]=n=>_.value=n),class:"form-control form-control-sm",disabled:!C.value||U.value},[t[7]||(t[7]=a("option",{value:"",disabled:""},"-- Pilih Kompetisi --",-1)),(l(!0),o(x,null,L(tt.value,n=>(l(),o("optgroup",{key:"round-"+n.id,label:n.name},[(l(!0),o(x,null,L(n.competitions,c=>(l(),o("option",{key:c.id,value:String(c.id)},d(c.full_name),9,ae))),128))],8,ee))),128))],8,te),[[dt,_.value]]),U.value?(l(),o("small",ne,t[8]||(t[8]=[a("i",{class:"fas fa-spinner fa-spin mr-1"},null,-1),g(" Memuat daftar kompetisi... ")]))):S("",!0)]),a("div",se,[a("label",ie,[g(d(w.value?"Tim":"Peserta")+" (Event Participant) ",1),t[10]||(t[10]=a("span",{class:"text-danger"},"*",-1))]),Q(a("select",{"onUpdate:modelValue":t[1]||(t[1]=n=>k.value=n),class:"form-control form-control-sm",disabled:!C.value||!_.value||!((r=M.value)!=null&&r.event_group_id)||F.value},[a("option",le,d(F.value?`Memuat ${w.value?"tim":"peserta"}...`:`-- Pilih ${w.value?"Tim":"Peserta"} --`),1),!F.value&&nt.value.length===0?(l(),o("option",re," Tidak ada data "+d(w.value?"tim":"peserta")+". ",1)):S("",!0),(l(!0),o(x,null,L(nt.value,n=>(l(),o("optgroup",{key:"cat-"+n.id,label:`${n.name} (${n.count})`},[(l(!0),o(x,null,L(n.contingents,c=>(l(),o(x,{key:"cont-"+n.id+"-"+c.name},[a("option",de," — "+d(c.name)+" ("+d(c.count)+") ",1),(l(!0),o(x,null,L(c.items,b=>(l(),o("option",{key:"p-"+b.id,value:String(b.id)},d(gt(b,n.name,c.name)),9,me))),128))],64))),128))],8,ue))),128))],8,oe),[[dt,k.value]]),_.value?M.value&&w.value?(l(),o("small",ve," Mode team aktif: daftar yang tampil adalah tim pada group ini. ")):S("",!0):(l(),o("small",ce,"Pilih kompetisi dulu."))])])])]),_.value&&k.value?(l(),o("div",ge,[a("div",fe,[a("div",null,[a("strong",null,d(((m=(f=h.value)==null?void 0:f.competition)==null?void 0:m.full_name)||"Kompetisi"),1),(u=h.value)!=null&&u.participant?(l(),o("div",be,[w.value?(l(),o(x,{key:0},[t[11]||(t[11]=g(" Tim: ")),a("strong",null,d(h.value.participant.team_name||h.value.participant.contingent||h.value.participant.full_name),1),t[12]||(t[12]=a("span",{class:"ml-2"},"•",-1)),t[13]||(t[13]=g(" Kategori: ")),a("strong",null,d(h.value.participant.category_name||"-"),1)],64)):(l(),o(x,{key:1},[t[14]||(t[14]=g(" Peserta: ")),a("strong",null,d(h.value.participant.full_name),1),t[15]||(t[15]=a("span",{class:"ml-2"},"•",-1)),t[16]||(t[16]=g(" NIK: ")),a("strong",null,d(h.value.participant.nik||"-"),1),t[17]||(t[17]=a("span",{class:"ml-2"},"•",-1)),t[18]||(t[18]=g(" Kontingen: ")),a("strong",null,d(h.value.participant.contingent||"-"),1)],64))])):S("",!0)]),a("div",pe,[a("button",{class:"btn btn-sm btn-outline-primary",disabled:O.value,onClick:R},t[19]||(t[19]=[a("i",{class:"fas fa-sync mr-1"},null,-1),g(" Reload Form ")]),8,_e)])]),!O.value&&B.value.length&&P.value.length?(l(),o("div",he,[a("table",ye,[a("thead",ke,[a("tr",null,[t[21]||(t[21]=a("th",{style:{"min-width":"280px"}},"Komponen",-1)),(l(!0),o(x,null,L(B.value,n=>(l(),o("th",{key:"j-"+n.id,style:{"min-width":"260px"},class:"text-center"},[a("div",xe,[a("div",we,d(n.name),1),a("div",Se,[t[20]||(t[20]=g(" Total: ")),a("span",Me,d(G(X(n.id))),1),H(n.id)?(l(),o("span",{key:0,class:Z(["ml-1 badge",bt(H(n.id))])},d(H(n.id)),3)):S("",!0)])])]))),128))])]),a("tbody",null,[(l(!0),o(x,null,L(P.value,n=>(l(),o("tr",{key:"c-"+n.id,class:Z({"table-warning":!it(n.id).ok})},[a("td",null,[a("div",Ne,[a("div",null,[a("strong",null,d(n.field_name),1),a("div",Ce,[t[22]||(t[22]=g(" Max: ")),a("strong",null,d(G(n.max_score||0)),1),t[23]||(t[23]=g(" • Weight: ")),a("strong",null,d(n.weight??0)+"%",1)])]),a("span",Be," Max Weighted: "+d(G(_t(n))),1)])]),(l(!0),o(x,null,L(B.value,c=>(l(),o("td",{key:"cell-"+n.id+"-"+c.id},[a("div",$e,[a("div",Te,[Q(a("input",{type:"number",step:"0.01",min:"0",class:"form-control form-control-sm",disabled:J(c.id),max:Number(n.max_score||0)||null,"onUpdate:modelValue":b=>N.value[c.id].itemsMap[n.id].score=b,onInput:b=>ht(c.id,n.id),placeholder:"Score"},null,40,Le),[[mt,N.value[c.id].itemsMap[n.id].score,void 0,{number:!0}]]),a("small",Ge,[t[24]||(t[24]=g(" W: ")),a("strong",null,d(G(lt(c.id,n.id))),1)])]),a("div",Ie,[Q(a("input",{type:"text",class:"form-control form-control-sm",disabled:J(c.id),"onUpdate:modelValue":b=>N.value[c.id].itemsMap[n.id].notes=b,placeholder:"Catatan"},null,8,Pe),[[mt,N.value[c.id].itemsMap[n.id].notes]]),a("small",{class:"text-muted text-xs d-block mt-1"}," Range max: "+d(E)+" poin ")])])]))),128))],2))),128)),a("tr",Ve,[t[25]||(t[25]=a("td",{class:"text-right font-weight-bold"},"TOTAL",-1)),(l(!0),o(x,null,L(B.value,n=>(l(),o("td",{key:"total-"+n.id,class:"text-center"},[a("span",Ae,d(G(X(n.id))),1)]))),128))]),a("tr",De,[t[27]||(t[27]=a("td",{class:"text-right font-weight-bold"},"FINAL (AVG Hakim)",-1)),a("td",{colspan:B.value.length,class:"text-center"},[a("span",Re,d(G(pt.value)),1),t[26]||(t[26]=a("span",{class:"text-muted text-xs ml-2"}," (rata-rata total semua hakim) ",-1))],8,Ee)])])])])):(l(),o("div",Ke,[O.value?(l(),o("div",Ue,t[28]||(t[28]=[a("i",{class:"fas fa-spinner fa-spin mr-1"},null,-1),g(" Memuat form penilaian... ")]))):(l(),o("div",Fe," Hakim / Komponen belum tersedia untuk kompetisi ini. "))])),a("div",je,[a("div",Oe,[a("div",{class:"text-muted text-sm"},[t[31]||(t[31]=a("div",{class:"mb-1"},[a("span",{class:"badge badge-light border"},"Auto hitung: score × (weight/100)"),a("span",{class:"ml-2 badge badge-light border"},"Score dipotong jika melebihi max")],-1)),a("div",{class:"text-xs"},[t[29]||(t[29]=g(" Range antar hakim per komponen maksimal ")),a("strong",null,d(E)),t[30]||(t[30]=g(" poin. "))])]),V.value?S("",!0):(l(),o("div",We,[a("div",qe,[t[35]||(t[35]=a("i",{class:"fas fa-exclamation-triangle mr-2 mt-1"},null,-1)),a("div",null,[t[34]||(t[34]=a("div",{class:"font-weight-bold"},"Validasi gagal",-1)),a("div",{class:"text-sm"},[t[32]||(t[32]=g(" Selisih nilai antar hakim pada satu bidang tidak boleh lebih dari ")),a("strong",null,d(E)),t[33]||(t[33]=g(" poin. "))]),a("ul",ze,[(l(!0),o(x,null,L(ot.value,n=>(l(),o("li",{key:"inv-"+n.component_id},[a("strong",null,d(n.field_name),1),g(" — rentang: "+d(G(n.min))+" s/d "+d(G(n.max))+" (selisih "+d(G(n.diff))+") ",1)]))),128))])])])])),a("div",He,[yt.value?(l(),o("button",{key:0,class:"btn btn-sm btn-outline-primary",disabled:Nt.value,onClick:Gt},[T.value?(l(),o("i",Qe)):S("",!0),t[36]||(t[36]=g(" Save Draft "))],8,Je)):S("",!0),kt.value?(l(),o("button",{key:1,class:"btn btn-sm btn-outline-success",disabled:Ct.value,onClick:It}," Submit ",8,Xe)):S("",!0),xt.value?(l(),o("button",{key:2,class:"btn btn-sm btn-outline-danger",disabled:Bt.value,onClick:Pt}," Lock ",8,Ye)):S("",!0)])])])])):C.value?(l(),o("div",Ze,[t[37]||(t[37]=g(" Pilih ")),t[38]||(t[38]=a("strong",null,"kompetisi",-1)),t[39]||(t[39]=g(" dan ")),a("strong",null,d(w.value?"tim":"peserta"),1),t[40]||(t[40]=g(" untuk mulai input nilai. "))])):S("",!0)])])],64)}}},ia=Rt(ta,[["__scopeId","data-v-3be71439"]]);export{ia as default};
