import{A as h,z as E,y as b,O as N,V as S,B as o,C as r,D as e,I as g,K as d,J as n,U as f,ay as G,a as P}from"./AuthUserStore-NBT_5Ejm.js";import{S as u}from"./sweetalert2.esm.all-9Qm2jZ7z.js";import{_ as D}from"./app-Dh17pVC5.js";const J={class:"content-header"},j={class:"container-fluid"},C={class:"d-flex justify-content-between align-items-center"},B={class:"d-flex gap-2"},K=["disabled"],V=["disabled"],F={key:0,class:"text-danger text-sm mt-2 mb-0"},H={class:"content"},U={class:"container-fluid"},A={class:"card"},L={class:"card-body table-responsive p-0"},M={class:"table table-bordered table-hover text-sm mb-0"},T={class:"bg-light"},$={colspan:"9",class:"text-center py-2"},z={class:"text-muted text-sm"},O={key:0},R={key:0},q={key:1},Q={class:"text-center"},W={class:"badge badge-warning"},X={class:"text-center"},Y={class:"badge badge-secondary"},Z={class:"text-center"},ee={class:"badge badge-secondary"},te={class:"text-center"},ae={class:"badge badge-light"},se={class:"text-center"},ne={class:"badge badge-light"},le={class:"text-center"},oe={class:"badge badge-light"},re={class:"text-center font-weight-bold"},ie={__name:"EventContingentStandings",setup(de){const i=h(!1),y=E(),c=b(()=>y.eventData||null),s=b(()=>{var a;return((a=c.value)==null?void 0:a.id)||null}),p=h([]),_=h(!1),v=async()=>{if(s.value){_.value=!0;try{const a=await P.get("/api/v1/event-contingent-standings",{params:{event_id:s.value}});p.value=a.data.data||[]}catch(a){console.error("Gagal memuat klasemen kontingen:",a),u.fire("Gagal","Gagal memuat klasemen kontingen.","error")}finally{_.value=!1}}},k=async()=>{if(s.value){i.value=!0;try{const a=`/api/v1/event-contingent-standings/export/excel?event_id=${s.value}`;window.open(a,"_blank")}catch(a){console.error("Gagal export excel:",a),u.fire("Gagal","Gagal export Excel.","error")}finally{i.value=!1}}},w=async()=>{if(s.value){i.value=!0;try{const a=`/api/v1/event-contingent-standings/export/pdf?event_id=${s.value}`;window.open(a,"_blank")}catch(a){console.error("Gagal export pdf:",a),u.fire("Gagal","Gagal export PDF.","error")}finally{i.value=!1}}};return N(()=>s.value,a=>{a&&v()}),S(()=>{s.value?v():u.fire("Event belum dipilih","Silakan pilih event melalui Portal Event terlebih dahulu.","info")}),(a,t)=>{var x,m;return r(),o(f,null,[e("section",J,[e("div",j,[e("div",C,[t[2]||(t[2]=e("div",null,[e("h1",{class:"mb-1"},"Klasemen Perolehan Juara Kontingen"),e("p",{class:"mb-0 text-muted text-sm"}," Rekap perolehan juara dan total poin setiap kontingen pada event aktif. ")],-1)),e("div",B,[e("button",{class:"btn btn-outline-success btn-sm mr-2",onClick:k,disabled:!s.value||i.value},t[0]||(t[0]=[e("i",{class:"fas fa-file-excel mr-1"},null,-1),d(" Export Excel ")]),8,K),e("button",{class:"btn btn-outline-danger btn-sm",onClick:w,disabled:!s.value||i.value},t[1]||(t[1]=[e("i",{class:"fas fa-file-pdf mr-1"},null,-1),d(" Export PDF ")]),8,V)])]),s.value?g("",!0):(r(),o("p",F,t[3]||(t[3]=[e("i",{class:"fas fa-exclamation-triangle mr-1"},null,-1),d(" Event belum dipilih. Silakan pilih event melalui Portal Event. ")])))])]),e("section",H,[e("div",U,[e("div",A,[e("div",L,[e("table",M,[e("thead",null,[e("tr",T,[e("th",$,[t[4]||(t[4]=e("div",{class:"font-weight-bold text-uppercase"}," Daftar Perolehan Juara per Kontingen ",-1)),e("div",z,[d(n((x=c.value)==null?void 0:x.event_name)+" ",1),(m=c.value)!=null&&m.event_year?(r(),o("span",O," ("+n(c.value.event_year)+") ",1)):g("",!0)])])]),t[5]||(t[5]=e("tr",{class:"thead-light"},[e("th",{rowspan:"2",style:{width:"40px"},class:"text-center align-middle"},"No"),e("th",{rowspan:"2",class:"align-middle"},"Kontingen"),e("th",{colspan:"6",class:"text-center"}," Perolehan Juara "),e("th",{rowspan:"2",style:{width:"90px"},class:"text-center align-middle"},[d(" Total"),e("br"),d("Poin ")])],-1)),t[6]||(t[6]=e("tr",{class:"thead-light text-center"},[e("th",{style:{width:"70px"}},"Juara I"),e("th",{style:{width:"70px"}},"Juara II"),e("th",{style:{width:"70px"}},"Juara III"),e("th",{style:{width:"80px"}},"Har. I"),e("th",{style:{width:"80px"}},"Har. II"),e("th",{style:{width:"80px"}},"Har. III")],-1))]),e("tbody",null,[_.value?(r(),o("tr",R,t[7]||(t[7]=[e("td",{colspan:"9",class:"text-center"}," Memuat klasemen kontingen... ",-1)]))):p.value.length===0?(r(),o("tr",q,t[8]||(t[8]=[e("td",{colspan:"9",class:"text-center text-muted"}," Belum ada data perolehan juara untuk event ini. ",-1)]))):g("",!0),(r(!0),o(f,null,G(p.value,(l,I)=>(r(),o("tr",{key:l.region_name},[e("td",null,n(I+1),1),e("td",null,[e("strong",null,n(l.region_name),1)]),e("td",Q,[e("span",W,n(Number(l.juara_1)),1)]),e("td",X,[e("span",Y,n(Number(l.juara_2)),1)]),e("td",Z,[e("span",ee,n(Number(l.juara_3)),1)]),e("td",te,[e("span",ae,n(Number(l.harapan_1)),1)]),e("td",se,[e("span",ne,n(Number(l.harapan_2)),1)]),e("td",le,[e("span",oe,n(Number(l.harapan_3)),1)]),e("td",re,n(Number(l.total_point)),1)]))),128))])])])])])])],64)}}},_e=D(ie,[["__scopeId","data-v-f35caa58"]]);export{_e as default};
