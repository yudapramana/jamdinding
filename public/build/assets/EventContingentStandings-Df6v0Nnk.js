import{A as g,z as G,y as k,O as P,V as D,B as o,C as r,D as e,I as u,J as d,K as s,U as w,ay as J,a as j}from"./AuthUserStore-B6VIMEgo.js";import{S as p}from"./sweetalert2.esm.all-9Qm2jZ7z.js";import{_ as C}from"./app-DdJgNepn.js";const B={class:"content-header"},K={class:"container-fluid"},V={class:"d-flex justify-content-between align-items-center"},F={key:0,class:"mb-0 mt-1 text-sm text-muted"},H={key:0},L={class:"d-flex gap-2"},U=["disabled"],A=["disabled"],M={key:0,class:"text-danger text-sm mt-2 mb-0"},T={class:"content"},$={class:"container-fluid"},z={class:"card"},O={class:"card-body table-responsive p-0"},R={class:"table table-bordered table-hover text-sm mb-0"},q={class:"bg-light"},Q={colspan:"9",class:"text-center py-2"},W={class:"text-muted text-sm"},X={key:0},Y={key:0},Z={key:1},ee={class:"text-center"},te={class:"badge badge-warning"},ae={class:"text-center"},se={class:"badge badge-secondary"},ne={class:"text-center"},le={class:"badge badge-secondary"},oe={class:"text-center"},re={class:"badge badge-light"},ie={class:"text-center"},de={class:"badge badge-light"},ce={class:"text-center"},ue={class:"badge badge-light"},pe={class:"text-center font-weight-bold"},_e={__name:"EventContingentStandings",setup(ve){const c=g(!1),I=G(),i=k(()=>I.eventData||null),n=k(()=>{var a;return((a=i.value)==null?void 0:a.id)||null}),_=g([]),v=g(!1),h=async()=>{if(n.value){v.value=!0;try{const a=await j.get("/api/v1/event-contingent-standings",{params:{event_id:n.value}});_.value=a.data.data||[]}catch(a){console.error("Gagal memuat klasemen kontingen:",a),p.fire("Gagal","Gagal memuat klasemen kontingen.","error")}finally{v.value=!1}}},E=async()=>{if(n.value){c.value=!0;try{const a=`/api/v1/event-contingent-standings/export/excel?event_id=${n.value}`;window.open(a,"_blank")}catch(a){console.error("Gagal export excel:",a),p.fire("Gagal","Gagal export Excel.","error")}finally{c.value=!1}}},N=async()=>{if(n.value){c.value=!0;try{const a=`/api/v1/event-contingent-standings/export/pdf?event_id=${n.value}`;window.open(a,"_blank")}catch(a){console.error("Gagal export pdf:",a),p.fire("Gagal","Gagal export PDF.","error")}finally{c.value=!1}}};return P(()=>n.value,a=>{a&&h()}),D(()=>{n.value?h():p.fire("Event belum dipilih","Silakan pilih event melalui Portal Event terlebih dahulu.","info")}),(a,t)=>{var m,x,b,f,y;return r(),o(w,null,[e("section",B,[e("div",K,[e("div",V,[e("div",null,[t[2]||(t[2]=e("h1",{class:"mb-1"},"Klasemen Perolehan Juara Kontingen",-1)),t[3]||(t[3]=e("p",{class:"mb-0 text-muted text-sm"}," Rekap perolehan juara dan total poin setiap kontingen pada event aktif. ",-1)),n.value?(r(),o("p",F,[t[0]||(t[0]=d(" Event aktif: ")),e("strong",null,s((m=i.value)==null?void 0:m.event_name),1),(x=i.value)!=null&&x.event_year?(r(),o("span",H," ("+s(i.value.event_year)+") ",1)):u("",!0),t[1]||(t[1]=d(" â€¢ Lokasi: ")),e("strong",null,s(((b=i.value)==null?void 0:b.event_location)||"-"),1)])):u("",!0)]),e("div",L,[e("button",{class:"btn btn-outline-success btn-sm mr-2",onClick:E,disabled:!n.value||c.value},t[4]||(t[4]=[e("i",{class:"fas fa-file-excel mr-1"},null,-1),d(" Export Excel ")]),8,U),e("button",{class:"btn btn-outline-danger btn-sm",onClick:N,disabled:!n.value||c.value},t[5]||(t[5]=[e("i",{class:"fas fa-file-pdf mr-1"},null,-1),d(" Export PDF ")]),8,A)])]),n.value?u("",!0):(r(),o("p",M,t[6]||(t[6]=[e("i",{class:"fas fa-exclamation-triangle mr-1"},null,-1),d(" Event belum dipilih. Silakan pilih event melalui Portal Event. ")])))])]),e("section",T,[e("div",$,[e("div",z,[e("div",O,[e("table",R,[e("thead",null,[e("tr",q,[e("th",Q,[t[7]||(t[7]=e("div",{class:"font-weight-bold text-uppercase"}," Daftar Perolehan Juara per Kontingen ",-1)),e("div",W,[d(s((f=i.value)==null?void 0:f.event_name)+" ",1),(y=i.value)!=null&&y.event_year?(r(),o("span",X," ("+s(i.value.event_year)+") ",1)):u("",!0)])])]),t[8]||(t[8]=e("tr",{class:"thead-light"},[e("th",{rowspan:"2",style:{width:"40px"},class:"text-center align-middle"},"No"),e("th",{rowspan:"2",class:"align-middle"},"Kontingen"),e("th",{colspan:"6",class:"text-center"}," Perolehan Juara "),e("th",{rowspan:"2",style:{width:"90px"},class:"text-center align-middle"},[d(" Total"),e("br"),d("Poin ")])],-1)),t[9]||(t[9]=e("tr",{class:"thead-light text-center"},[e("th",{style:{width:"70px"}},"Juara I"),e("th",{style:{width:"70px"}},"Juara II"),e("th",{style:{width:"70px"}},"Juara III"),e("th",{style:{width:"80px"}},"Har. I"),e("th",{style:{width:"80px"}},"Har. II"),e("th",{style:{width:"80px"}},"Har. III")],-1))]),e("tbody",null,[v.value?(r(),o("tr",Y,t[10]||(t[10]=[e("td",{colspan:"9",class:"text-center"}," Memuat klasemen kontingen... ",-1)]))):_.value.length===0?(r(),o("tr",Z,t[11]||(t[11]=[e("td",{colspan:"9",class:"text-center text-muted"}," Belum ada data perolehan juara untuk event ini. ",-1)]))):u("",!0),(r(!0),o(w,null,J(_.value,(l,S)=>(r(),o("tr",{key:l.region_name},[e("td",null,s(S+1),1),e("td",null,[e("strong",null,s(l.region_name),1)]),e("td",ee,[e("span",te,s(Number(l.juara_1)),1)]),e("td",ae,[e("span",se,s(Number(l.juara_2)),1)]),e("td",ne,[e("span",le,s(Number(l.juara_3)),1)]),e("td",oe,[e("span",re,s(Number(l.harapan_1)),1)]),e("td",ie,[e("span",de,s(Number(l.harapan_2)),1)]),e("td",ce,[e("span",ue,s(Number(l.harapan_3)),1)]),e("td",pe,s(Number(l.total_point)),1)]))),128))])])])])])])],64)}}},xe=C(_e,[["__scopeId","data-v-7da3477b"]]);export{xe as default};
