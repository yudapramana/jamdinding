import{z as S,y as x,A as u,V as P,B as l,C as o,D as e,I as f,K as n,J as v,S as w,aB as F,U as h,ay as K,a as B}from"./AuthUserStore-NBT_5Ejm.js";import{S as c}from"./sweetalert2.esm.all-9Qm2jZ7z.js";import{_ as G}from"./app-Dh17pVC5.js";const V={class:"content-header"},A={class:"container-fluid"},C={class:"d-flex justify-content-between align-items-center"},I={key:0,class:"mb-0 mt-1 text-sm text-muted"},M={key:0},U=["disabled"],L={key:0,class:"text-danger text-sm mt-2 mb-0"},N={class:"content"},T={class:"container-fluid"},Q={class:"card"},$={class:"card-body"},j={class:"row"},z={class:"col-md-6"},J={class:"form-group"},R=["disabled"],q=["value"],H={__name:"KokardeExport",setup(O){const y=S(),i=x(()=>y.eventData||null),s=x(()=>{var a;return((a=i.value)==null?void 0:a.id)||null}),g=u([]),r=u(""),m=u(!1),p=u(!1),D=async()=>{m.value=!0;try{const a=await B.get("/api/v1/master",{params:{type:"event_regions",event_id:s.value}});g.value=a.data.data||[]}catch(a){console.error(a),c.fire("Gagal","Gagal memuat data kontingen.","error")}finally{m.value=!1}},E=async()=>{if(!s.value||!r.value){c.fire("Data belum lengkap","Silakan pilih event dan kontingen terlebih dahulu.","warning");return}p.value=!0;try{const a=`/api/v1/event-kokarde/export/pdf?event_id=${s.value}&region_id=${r.value}`;window.open(a,"_blank")}catch(a){console.error(a),c.fire("Gagal","Gagal mengunduh PDF kokarde.","error")}finally{p.value=!1}};return P(()=>{s.value?D():c.fire("Event belum dipilih","Silakan pilih event melalui Portal Event terlebih dahulu.","info")}),(a,t)=>{var _,k,b;return o(),l(h,null,[e("section",V,[e("div",A,[e("div",C,[e("div",null,[t[3]||(t[3]=e("h1",{class:"mb-1"},"Cetak Kokarde Peserta MTQ",-1)),t[4]||(t[4]=e("p",{class:"mb-0 text-muted text-sm"}," Generate dan unduh kokarde peserta MTQ per kontingen dalam format PDF (A6). ",-1)),s.value?(o(),l("p",I,[t[1]||(t[1]=n(" Event aktif: ")),e("strong",null,v((_=i.value)==null?void 0:_.event_name),1),(k=i.value)!=null&&k.event_year?(o(),l("span",M," ("+v(i.value.event_year)+") ",1)):f("",!0),t[2]||(t[2]=n(" â€¢ Lokasi: ")),e("strong",null,v(((b=i.value)==null?void 0:b.event_location)||"-"),1)])):f("",!0)]),e("div",null,[e("button",{class:"btn btn-outline-danger btn-sm",onClick:E,disabled:!s.value||!r.value||p.value},t[5]||(t[5]=[e("i",{class:"fas fa-file-pdf mr-1"},null,-1),n(" Export PDF ")]),8,U)])]),s.value?f("",!0):(o(),l("p",L,t[6]||(t[6]=[e("i",{class:"fas fa-exclamation-triangle mr-1"},null,-1),n(" Event belum dipilih. Silakan pilih event melalui Portal Event. ")])))])]),e("section",N,[e("div",T,[e("div",Q,[e("div",$,[e("div",j,[e("div",z,[e("div",J,[t[8]||(t[8]=e("label",null,[n(" Kontingen "),e("span",{class:"text-danger"},"*")],-1)),w(e("select",{"onUpdate:modelValue":t[0]||(t[0]=d=>r.value=d),class:"form-control",disabled:m.value},[t[7]||(t[7]=e("option",{value:""},"-- Pilih Kontingen --",-1)),(o(!0),l(h,null,K(g.value,d=>(o(),l("option",{key:d.id,value:d.id},v(d.name),9,q))),128))],8,R),[[F,r.value]])])])]),t[9]||(t[9]=e("div",{class:"alert alert-info text-sm mb-0"},[e("i",{class:"fas fa-info-circle mr-1"}),n(" File PDF akan berisi "),e("strong",null,"seluruh peserta"),n(" dari kontingen terpilih, dengan "),e("strong",null,"1 peserta = 1 halaman A6"),n(". ")],-1))])])])])],64)}}},Z=G(H,[["__scopeId","data-v-a4be8e5c"]]);export{Z as default};
