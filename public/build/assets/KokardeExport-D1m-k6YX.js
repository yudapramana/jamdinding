import{z as D,y as x,J as u,V as P,A as l,B as o,C as e,O as f,S as n,M as v,R as w,aB as F,U as h,ay as B,a as G}from"./AuthUserStore-Du_wEH36.js";import{S as c}from"./sweetalert2.esm.all-9Qm2jZ7z.js";import{_ as K}from"./app-D2SkCNoG.js";const M={class:"content-header"},V={class:"container-fluid"},A={class:"d-flex justify-content-between align-items-center"},C={key:0,class:"mb-0 mt-1 text-sm text-muted"},U={key:0},I=["disabled"],L={key:0,class:"text-danger text-sm mt-2 mb-0"},N={class:"content"},T={class:"container-fluid"},Q={class:"card"},R={class:"card-body"},$={class:"row"},j={class:"col-md-6"},z={class:"form-group"},J=["disabled"],O=["value"],q={__name:"KokardeExport",setup(H){const y=D(),i=x(()=>y.eventData||null),s=x(()=>{var a;return((a=i.value)==null?void 0:a.id)||null}),g=u([]),r=u(""),m=u(!1),p=u(!1),E=async()=>{m.value=!0;try{const a=await G.get("/api/v1/master",{params:{type:"event_regions",event_id:s.value}});g.value=a.data.data||[]}catch(a){console.error(a),c.fire("Gagal","Gagal memuat data kontingen.","error")}finally{m.value=!1}},S=async()=>{if(!s.value||!r.value){c.fire("Data belum lengkap","Silakan pilih event dan kontingen terlebih dahulu.","warning");return}p.value=!0;try{const a=`/api/v1/event-kokarde/export/pdf?event_id=${s.value}&region_id=${r.value}`;window.open(a,"_blank")}catch(a){console.error(a),c.fire("Gagal","Gagal mengunduh PDF kokarde.","error")}finally{p.value=!1}};return P(()=>{s.value?E():c.fire("Event belum dipilih","Silakan pilih event melalui Portal Event terlebih dahulu.","info")}),(a,t)=>{var _,k,b;return o(),l(h,null,[e("section",M,[e("div",V,[e("div",A,[e("div",null,[t[3]||(t[3]=e("h1",{class:"mb-1"},"Cetak Kokarde Peserta MTQ",-1)),t[4]||(t[4]=e("p",{class:"mb-0 text-muted text-sm"}," Generate dan unduh kokarde peserta MTQ per kontingen dalam format PDF (A6). ",-1)),s.value?(o(),l("p",C,[t[1]||(t[1]=n(" Event aktif: ")),e("strong",null,v((_=i.value)==null?void 0:_.event_name),1),(k=i.value)!=null&&k.event_year?(o(),l("span",U," ("+v(i.value.event_year)+") ",1)):f("",!0),t[2]||(t[2]=n(" â€¢ Lokasi: ")),e("strong",null,v(((b=i.value)==null?void 0:b.event_location)||"-"),1)])):f("",!0)]),e("div",null,[e("button",{class:"btn btn-outline-danger btn-sm",onClick:S,disabled:!s.value||!r.value||p.value},t[5]||(t[5]=[e("i",{class:"fas fa-file-pdf mr-1"},null,-1),n(" Export PDF ")]),8,I)])]),s.value?f("",!0):(o(),l("p",L,t[6]||(t[6]=[e("i",{class:"fas fa-exclamation-triangle mr-1"},null,-1),n(" Event belum dipilih. Silakan pilih event melalui Portal Event. ")])))])]),e("section",N,[e("div",T,[e("div",Q,[e("div",R,[e("div",$,[e("div",j,[e("div",z,[t[8]||(t[8]=e("label",null,[n(" Kontingen "),e("span",{class:"text-danger"},"*")],-1)),w(e("select",{"onUpdate:modelValue":t[0]||(t[0]=d=>r.value=d),class:"form-control",disabled:m.value},[t[7]||(t[7]=e("option",{value:""},"-- Pilih Kontingen --",-1)),(o(!0),l(h,null,B(g.value,d=>(o(),l("option",{key:d.id,value:d.id},v(d.name),9,O))),128))],8,J),[[F,r.value]])])])]),t[9]||(t[9]=e("div",{class:"alert alert-info text-sm mb-0"},[e("i",{class:"fas fa-info-circle mr-1"}),n(" File PDF akan berisi "),e("strong",null,"seluruh peserta"),n(" dari kontingen terpilih, dengan "),e("strong",null,"1 peserta = 1 halaman A6"),n(". ")],-1))])])])])],64)}}},Z=K(q,[["__scopeId","data-v-a4be8e5c"]]);export{Z as default};
