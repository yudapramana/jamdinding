import{Q as v,J as a,e as r,u as A,r as W,x as i}from"./app-CSA2mFh-.js";import{u as E}from"./LoadingStore-B9qlbHQ0.js";const N=v("MasterDataStore",()=>{const I=a("MasterDataStore:orgId",r("")),S=a("MasterDataStore:userId",r("")),p=a("MasterDataStore:orgList",r([])),h=a("MasterDataStore:userList",r({})),g=a("MasterDataStore:doctypeList",r([])),c=a("MasterDataStore:workunitList",r([])),l=a("MasterDataStore:workUnitMonitorList",r([])),d=a("MasterDataStore:selfWorkUnitMonitorList",r([])),y=a("MasterDataStore:docParameters",r([1,2,3,4,5,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023,2024,2025,"D2","D3","S1","S2","S3","IIa","IIb","IIc","IId","IIIa","IIIb","IIIc","IIId","IVa","IVb","IVc","IVd","Suami","Istri"])),e=E(),s=A(),L=async()=>{console.log("getWorkUnitMonitorList start"),l.value.length==0&&(console.log("getWorkUnitMonitorList runned"),e.toggleLoading(),await i.get("/api/work-units/monitor").then(t=>{l.value=t,e.toggleLoading(),console.log("workUnitMonitorList hasbeenfetched")}).catch(t=>{e.toggleLoading(),s.handleAuthError(t)}))},f=async()=>{console.log("getSelfWorkUnitMonitorList start"),d.value.length==0&&(console.log("getSelfWorkUnitMonitorList runned"),e.toggleLoading(),await i.get("/api/work-units/self-monitor").then(t=>{d.value=t,e.toggleLoading(),console.log("selfWorkUnitMonitorList hasbeenfetched")}).catch(t=>{e.toggleLoading(),s.handleAuthError(t)}))},m=async()=>{c.value.length==0&&(e.toggleLoading(),await i.get("/api/master",{params:{type:"workunits"}}).then(t=>{c.value=t.data.data,e.toggleLoading(),console.log("workunitList hasbeenfetched")}).catch(t=>{e.toggleLoading(),s.handleAuthError(t)}))},M=async(t=null)=>{if(console.log("doctypeList.value.length:",g.value.length),g.value.length===0||s.user.role=="SUPERADMIN"||s.user.role=="ADMIN"){e.toggleLoading();try{const o=await i.get("/api/master",{params:{type:"doctypes",...t&&{user_id:t}}});g.value=o.data.data}catch(o){console.error("doctypeList fetch error:",o),s.handleAuthError(o)}finally{e.toggleLoading()}}},k=async t=>{e.toggleLoading(),await i.get("/api/master",{params:{type:"users",id:t}}).then(o=>{h.value=o.data.data,e.toggleLoading()}).catch(o=>{e.toggleLoading(),s.handleAuthError(o)})},n=W({});function U(t,o){n[String(t)]=Array.isArray(o)?o:[];try{sessionStorage.setItem("empCache",JSON.stringify(n))}catch{}}function D(){try{const t=sessionStorage.getItem("empCache");if(!t)return;const o=JSON.parse(t)||{};for(const u of Object.keys(o))n[u]=o[u]}catch{}}function w(){for(const t of Object.keys(n))delete n[t];try{sessionStorage.removeItem("empCache")}catch{}}return{orgId:I,userId:S,orgList:p,userList:h,doctypeList:g,workunitList:c,docParameters:y,workUnitMonitorList:l,selfWorkUnitMonitorList:d,employeesCacheByUnit:n,getUserList:k,getDoctypeList:M,getWorkunitList:m,getWorkUnitMonitorList:L,setEmployees:U,hydrateEmployeesCache:D,getWorkUnitMonitorList:L,clearEmployeesCache:w,getSelfWorkUnitMonitorList:f}});export{N as u};
